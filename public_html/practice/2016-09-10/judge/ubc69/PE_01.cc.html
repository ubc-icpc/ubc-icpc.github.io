<!DOCTYPE html>
<html>
<head>
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>
<style type="text/css">.syntaxhighlighter{overflow-y: hidden !important; overflow-x: auto !important;}</style></head>
<body>
<pre class="brush: cpp">
#include &lt;iostream&gt;
#include &lt;map&gt;
#include &lt;set&gt;
#include &lt;string&gt;
#include &lt;vector&gt;

using namespace std;


int main() {
	int t;
	cin &gt;&gt; t;
	while (t--) {
		map&lt;string, set&lt;string&gt;&gt; m;
		map&lt;string, set&lt;string&gt;&gt; m2;
		int n, n2;
		cin &gt;&gt; n;
		n2 = n;
		while (n2--) {
			string name;
			cin &gt;&gt; name;
			int toppings;
			cin &gt;&gt; toppings;
			vector&lt;string&gt; vs;
			vector&lt;string&gt; vsback;
			set&lt;string&gt; ss;
			set&lt;string&gt; ssback;
			for (int i = 0; i &lt; toppings; i++) {
				string s;
				cin &gt;&gt; s;
				vs.push_back(s);
				ssback.insert(s);
			}
			int english;
			cin &gt;&gt; english;
			for (int i = 0; i &lt; english; i++) {
				string s;
				cin &gt;&gt; s;
				vsback.push_back(s);
				ss.insert(s);
			}
			for (string s : vs) {
				if (m.find(s) == m.end()) {
					m[s] = ss;
				}
				else {
					set&lt;string&gt; s2;
					for (string ms : m[s]) {
						if (ss.count(ms)) {
							s2.insert(ms);
						}
					}
					m[s] = s2;
				}
			}
			for (string s : vsback) {
				if (m2.find(s) == m2.end()) {
					m2[s] = ssback;
				}
				else {
					set&lt;string&gt; s2;
					for (string ms : m2[s]) {
						if (ssback.count(ms)) {
							s2.insert(ms);
						}
					}
					m2[s] = s2;
				}
			}
		}

		for (auto map_entry : m) {
			set&lt;string&gt; ss = m[map_entry.first];
			for (string s : ss) {
				if (m2[s].count(map_entry.first))
					cout &lt;&lt; &quot;(&quot; &lt;&lt; map_entry.first &lt;&lt; &quot;, &quot; &lt;&lt; s &lt;&lt; &quot;)&quot; &lt;&lt; endl;
			}
		}
		cout &lt;&lt; endl;
	}
	return 0;
}</pre>
</body>
<script type="text/javascript">SyntaxHighlighter.all()</script></html>
