<!DOCTYPE html>
<html>
<head>
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>
<style type="text/css">.syntaxhighlighter{overflow-y: hidden !important; overflow-x: auto !important;}</style></head>
<body>
<pre class="brush: cpp">
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
using namespace std;

string s[50];

int main() {
  int N, M;
  cin &gt;&gt; N &gt;&gt; M;
  for (int i = 0; i &lt; N; i++)
    cin &gt;&gt; s[i];
  int mx = 0;
  for (int i = 0; i &lt; 26; i++) {
    for (int j = 0; j &lt; 26; j++) {
      if (i == j)
        continue;
      char m = 'A'+i, o = 'A'+j;
      if (m == 'M' || o == 'O')
        continue;
      int mxi = 0;
      for (int x = 0; x &lt; N; x++) {
        for (int y = 0; y &lt; M; y++) {
          // down
          if (x+2 &lt; N) {
            if (s[x][y] == m &amp;&amp; s[x+1][y] == o &amp;&amp; s[x+2][y] == o)
              mxi++;
            if (s[x][y] == o &amp;&amp; s[x+1][y] == o &amp;&amp; s[x+2][y] == m)
              mxi++;
          }
          // right
          if (y+2 &lt; M) {
            if (s[x][y] == m &amp;&amp; s[x][y+1] == o &amp;&amp; s[x][y+2] == o)
              mxi++;
            if (s[x][y] == o &amp;&amp; s[x][y+1] == o &amp;&amp; s[x][y+2] == m)
              mxi++;
          }
          // down right
          if (x+2 &lt; N &amp;&amp; y+2 &lt; M) {
            if (s[x][y] == m &amp;&amp; s[x+1][y+1] == o &amp;&amp; s[x+2][y+2] == o)
              mxi++;
            if (s[x][y] == o &amp;&amp; s[x+1][y+1] == o &amp;&amp; s[x+2][y+2] == m)
              mxi++;
          }
          // down left
          if (x+2 &lt; N &amp;&amp; y-2 &gt;= 0) {
            if (s[x][y] == m &amp;&amp; s[x+1][y-1] == o &amp;&amp; s[x+2][y-2] == o)
              mxi++;
            if (s[x][y] == o &amp;&amp; s[x+1][y-1] == o &amp;&amp; s[x+2][y-2] == m)
              mxi++;
          }
        }
      }
      mx = max(mx,mxi);
    }
  }
  cout &lt;&lt; mx &lt;&lt; &quot;\n&quot;;
  return 0;
}
</pre>
</body>
<script type="text/javascript">SyntaxHighlighter.all()</script></html>
