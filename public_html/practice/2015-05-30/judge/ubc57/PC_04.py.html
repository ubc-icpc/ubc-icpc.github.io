<!DOCTYPE html>
<html>
<head>
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>
<style type="text/css">.syntaxhighlighter{overflow-y: hidden !important; overflow-x: auto !important;}</style></head>
<body>
<pre class="brush: cpp">
n=int(raw_input())
height=0
length=0
small=1009
L=[0]*1009
for i in range(1,n+1):
    a=list(map(int,raw_input().split()))
    length=max(length,a[1])
    small=min(small,a[0])
    height=max(height,a[2])
    for g in range(a[0],a[1]):
        L[g]=max(L[g],a[2])
L=L[:(length+1)]
L[length]=0
Pic=[]
per=0
for i in range(0,height):
    Pic.append(['.']*(length-small))
for i in range(small,length):
    n=min(L[i-1],L[i+1])
    if L[i]!=0:
        Pic[L[i]-1][i-small]='#'
        for j in range(max(n,1),L[i]):
            Pic[j-1][i-small]='#'
        per=per+1
    per=per+abs(L[i]-L[i-1])
    if L[i]==0 and L[i-2]==0 and L[i-1]!=0:
        per=per+abs(n)
per=per+L[length-1]
print(per)
for i in range(0,height):
    word=&quot;&quot;
    for j in range(0,length-small):
        word=word+Pic[height-1-i][j]
    print(word)
print(&quot;*&quot;*(length-small))


    
    
</pre>
</body>
<script type="text/javascript">SyntaxHighlighter.all()</script></html>
