!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/public/js",i(i.s=12)}([function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return f}),i.d(e,"c",function(){return p}),i.d(e,"d",function(){return s}),i.d(e,"e",function(){return n}),i.d(e,"f",function(){return a}),i.d(e,"g",function(){return o}),i.d(e,"h",function(){return d}),i.d(e,"i",function(){return h}),i.d(e,"j",function(){return c}),i.d(e,"k",function(){return r}),i.d(e,"l",function(){return l}),i.d(e,"m",function(){return g}),i.d(e,"n",function(){return v}),i.d(e,"o",function(){return m});var n="/ajax/session",s="/ajax/session/banner",a="/ajax/session/judge",o="/ajax/session/problem",r="/ajax/session/team",l="/ajax/session/team/member",h="/ajax/session/short-name-available",d="/ajax/session/publish",c="/ajax/session/start-flexible",u="/ajax/author",p="/ajax/course_offering/teacher",f="/ajax/course_offering/short-name-available",m="/users",g="/courses/{0}/{1}/problemgroups/{2}/edit",v="/sessions/{0}/edit"},function(t,e,i){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t){var e=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)$/);if(null===e)return!1;var i=parseInt(e[1],10),n=parseInt(e[2],10),s=parseInt(e[3],10);if(i<1970||i>2100||0===n||n>12)return!1;var a=[31,28,31,30,31,30,31,31,30,31,30,31];return(i%400==0||i%100!=0&&i%4==0)&&(a[1]=29),s>0&&s<=a[n-1]}function a(t){var e=t.match(/^(\d\d):(\d\d)(:(\d\d))?$/);if(null===e)return!1;var i=parseInt(e[1],10),n=parseInt(e[2],10),s=void 0===e[4]?null:parseInt(e[4],10);return i<24&&n<60&&(null===s||s<60)}function o(t){return(t<10?"0":"")+t}function r(t,e,i){if(t<0)return"-".concat(r(-t,e,i));var s,a=Math.floor(t),l=Math.floor(a/60),h=Math.floor(l/60),d=Math.floor(h/24),c=i?d:0,u=c>0?h%24:h,p=l%60,f=a%60;return s=1===c?["1 day ".concat(u)]:c>0?["".concat(c," days ").concat(u)]:e||u>0?[u]:[],[].concat(n(s),[o(p),o(f)]).join(":")}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return o})},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){var i=t.jQuery;e.a=function(){i(".sample pre").each(function(t,e){var n=document.createElement("span");n.classList.add("copy-to-clipboard"),e.appendChild(n),i(n).tooltip({placement:"bottom",container:"body",trigger:"manual",title:i(n).closest("[data-copied-to-clipboard-text]").attr("data-copied-to-clipboard-text"),animation:!1}).click(function(){!function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-999px",e.style.top="-999px",document.body.appendChild(e);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),document.body.removeChild(e),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}(e.textContent),i(n).tooltip("show")}).mouseout(function(){i(n).tooltip("hide")})})}}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e=i(0),n=i(1),s=t,a=s.jQuery,o=s.tmpl,r=a.ns("Kattis");a.extend(a.ns("Kattis.views.contest.edit"),{MAX_INT_32:Math.pow(2,31)-1,MAX_UNPRIVILEGED_DURATION:604800,init:function(t){var e=this;if(this.data=t,this.timehintsValid=!0,this.shortnameValid=!0,this.btnCreateSession=a("#create-btn"),this.btnCreateSession.bind("click",this.createSession.bind(this)),this.txtStartTime=a("#start-time"),this.spanStartHint=a("#start-hint"),this.startTimeVal=null,this.txtStartTime.bind("change keyup input",this.modifyTimeHints.bind(this)),this.txtDuration=a("#duration"),this.spanFinishHint=a("#finish-hint"),this.durationVal=null,this.txtDuration.bind("change keyup input",this.modifyTimeHints.bind(this)),this.sessionNameHint=a("#session-name-hint"),this.sessionNameValid=this.data.existing,this.data.existing||this.sessionNameHint.text("Name can't be empty"),a("#session-name").on("change keyup input",this.modifySessionNameHint.bind(this)),this.data.is_privileged&&(this.txtCutoff=a("#cutoff"),this.spanCutoffHint=a("#cutoff-hint"),this.cutoffVal=null,this.txtCutoff.bind("change keyup input",this.modifyTimeHints.bind(this)),this.flexibleStartTimesEnabled=a("#flexible-starttimes").is(":checked"),a("#flexible-starttimes").bind("change",this.onFlexibleStartTimesChange.bind(this)),this.txtFlexibleEndTime=a("#flexible-end-time"),this.spanFlexibleFinishHint=a("#flexible-finish-hint"),this.flexibleEndTimeVal=null,this.txtFlexibleEndTime.bind("change keyup input",this.modifyTimeHints.bind(this)),this.txtShortName=a("#short-name"),this.spanShortNameHint=a("#short-name-hint"),this.txtShortName.bind("change keyup input",this.onContestShortNameChange.bind(this)),this.selStandingsType=a("#standings-type"),this.spanStandingsTypeHint=a("#standings-type-hint"),this.selStandingsType.bind("change",this.modifyStandingsTypeHints.bind(this)),a("#remove-banner").bind("click",this.onRemoveBannerClick.bind(this)),this.modifyStandingsTypeHints()),this.data.existing){this.btnPublishSession=a("#publish-btn"),this.spanPublishProgress=a("#publish-progress"),this.btnPublishSession.bind("click",this.publishSession.bind(this)),a("#basic-settings").on("change input",":input",this.onBasicSettingChange.bind(this)),a("#tblProblems").on("mousedown mouseup",".dndhandle",function(){a(this).toggleClass("grab grabbing")}),a("#add-problem-btn").bind("click",this.onAddProblem.bind(this)),a("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").bind("change keyup input",this.onProblemNameAvailabilityChange.bind(this)),a("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").keypress(function(t){13!==t.keyCode||a("#add-problem-btn").prop("disabled")||a("#add-problem-btn").click()}),this.resetProblems(),this.setUpProblemsSorting(),this.data.is_privileged&&(this.tbodyJudge=a("#tblJudges tbody"),this.judge_tmpl=o("judge_tmpl"),a("#add-judge-btn").bind("click",this.onAddJudge.bind(this)),a("#add-judge-username").bind("change keyup input",function(){a("#add-judge-btn").prop("disabled",""===a(this).val())}),a("#add-judge-username").keypress(function(t){13!==t.keyCode||a("#add-judge-btn").prop("disabled")||a("#add-judge-btn").click()}),this.data.judges.forEach(this.addJudgeRow,this)),this.tbodyTeam=a("#tblTeams tbody"),this.team_tmpl=o("team_tmpl"),this.team_member_tmpl=o("team_member_tmpl"),this.autoaccept=!1,this.tbodyTeam.on("click","input.team-member-accepted",function(t){e.autoaccept=a(t.target).is(":checked"),e.tbodyTeam.find("input.team-member-accepted").prop("checked",e.autoaccept)}),a("#add-team-btn").bind("click",this.onAddTeam.bind(this));var i="#add-team-name".concat(this.data.is_privileged?", #add-team-penalty":"");a(i).keyup(function(t){13!==t.keyCode||a("#add-team-btn").prop("disabled")||a("#add-team-btn").click()}),a(document).on("focusin",function(t){var e=t.target;a("#tblTeams tbody tr").has(".team-edit:hidden").each(function(){a(this).has(e).length||a(this).find(".team-done").click()})}),this.data.teams.forEach(this.addTeamRow,this);var s=this,r=a("#add-problem-available-from");a(".enable-add-problem-popover").popover({placement:"top",html:!0,container:"body",content:'<input type="text" class="form-control problem-available-date">'}).on("show.bs.popover",function(){r.prop("disabled",!0)}).on("hide.bs.popover",function(){r.prop("disabled",!1)}).on("shown.bs.popover",function(){var t=s.getTimeFromString(s.startTimeVal),e=r.val().split(":"),i=e[1],o=e[0],l=a(".problem-available-date");if("infinity"!==t&&null!==t){var h=new Date(t.getTime()+6e4*i+36e5*o);l.val(s.getTimeStringFromDateObject(h))}l.on("change keyup paste",function(){if("infinity"!==t&&null!==t){var e=s.getTimeFromString(l.val());if(null!==e){var i=e-t;i>=0&&r.val("".concat(Math.floor(i/36e5),":").concat(Object(n.d)(Math.floor(i/6e4)%60)))}}})})}this.modifyTimeHints(),a("body").on("hidden.bs.popover",function(t){a(t.target).data("bs.popover").inState.click=!1})},getTimeStringFromDateObject:function(t){return"".concat(t.getUTCFullYear(),"-").concat(Object(n.d)(t.getUTCMonth()+1),"-").concat(Object(n.d)(t.getUTCDate())," ").concat(Object(n.d)(t.getUTCHours()),":").concat(Object(n.d)(t.getUTCMinutes()),":").concat(Object(n.d)(t.getUTCSeconds()))},modifySessionNameHint:function(t){""===a(t.target).val().trim()?(this.sessionNameHint.text("Name can't be empty"),this.sessionNameValid=!1):(this.sessionNameHint.text(""),this.sessionNameValid=!0),this.updateSaveButton()},isValid:function(){return this.timehintsValid&&this.shortnameValid&&this.sessionNameValid},updateSaveButton:function(t){t=void 0===t?this.isValid():t,this.btnCreateSession.prop("disabled",!t),this.data.existing&&(t?a("#unsaved-changes").removeClass("hidden"):a("#unsaved-changes").addClass("hidden"))},onBasicSettingChange:function(t){a(t.target).closest("div.form-group").addClass("has-warning"),this.updateSaveButton()},onFlexibleStartTimesChange:function(t){this.flexibleStartTimesEnabled=a(t.target).is(":checked"),a("#basic-settings").attr("data-flexible-enabled",this.flexibleStartTimesEnabled?"yes":"no"),this.modifyTimeHints()},onProblemNameAvailabilityChange:function(){var t=!0;""===a("#add-problem-name").val()&&(t=!1),this.data.is_privileged&&null===this.parse_formatted_interval(a("#add-problem-available-from").val())&&(t=!1),a("#add-problem-btn").prop("disabled",!t)},setUpProblemsSorting:function(){a("#tblProblems tbody").sortable({handle:"> .dndhandle",items:"> tr",helper:function(t,e){return e.parent().children().children().each(function(){a(this).width(a(this).width())}),e},update:function(t,i){var n={short_name:this.data.short_name,problem_name:i.item.attr("data-name"),index:i.item.index(),csrf_token:this.data.csrf_token};a.ajax({type:"PUT",url:e.g,contentType:"application/json",data:JSON.stringify(n),context:this}).done(function(t){this.replaceProblems(t.response.problems)}).fail(function(t){r.error.show_xhr_msg(i.item,t),this.resetProblems()})}.bind(this)})},onContestShortNameChange:function(){var t=this,i="glyphicon glyphicon-ok text-success",n="glyphicon glyphicon-remove text-danger",s="fa fa-spinner fa-spin",o=[i,n,s].join(" ");return this.call_id=(this.call_id||0)+1,this.hintTimeout&&(clearTimeout(this.hintTimeout),this.hintTimeout=null),this.data.short_name===this.txtShortName.val()?(this.spanShortNameHint.removeClass(o).addClass(i),this.data.existing&&this.btnPublishSession.prop("disabled",!1),this.shortnameValid=!0,void this.updateSaveButton()):""===this.txtShortName.val()?(this.spanShortNameHint.removeClass(o),this.shortnameValid=!0,void this.updateSaveButton()):(this.spanShortNameHint.removeClass(o).addClass(s),this.updateSaveButton(!1),this.data.existing&&this.btnPublishSession.prop("disabled",!0),void(this.hintTimeout=setTimeout(function(s){a.ajax({type:"GET",url:e.i,data:{name:t.txtShortName.val()},context:t}).always(function(){this.spanShortNameHint.removeClass(o)}).done(function(t){s===this.call_id&&(this.shortnameValid=t.response.available,this.spanShortNameHint.addClass(this.shortnameValid?i:n),this.updateSaveButton())}).fail(function(){s===this.call_id&&(this.shortnameValid=!1,this.spanShortNameHint.addClass(n),this.updateSaveButton())})},750,this.call_id)))},problem_tmpl:function(t){var e=o("problem_tmpl");return t.format_minutes=this.format_minutes,e(t)},onAddProblem:function(t){var i=a(t.target);a("#add-problem-btn, #add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").prop("disabled",!0);var n={short_name:this.data.short_name,problem_name:a("#add-problem-name").val(),color_name:a("#add-problem-color-name").val(),rgb:a("#add-problem-color-rgb").val(),csrf_token:this.data.csrf_token};this.data.is_privileged&&(n.available_in_session_from=this.parse_formatted_interval(a("#add-problem-available-from").val())),a.ajax({type:"POST",url:e.g,contentType:"application/json",data:JSON.stringify(n),context:this}).always(function(){a("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").prop("disabled",!1),a("#add-problem-name").focus(),a(".enable-add-problem-popover").popover("hide")}).done(function(t){a("#add-problem-name").val(""),a("#add-problem-available-from").val("0:00"),a("#add-problem-color-name").val(""),a("#add-problem-color-rgb").val(""),this.replaceProblems(t.response.problems)}).fail(function(t){i.prop("disabled",!1),r.error.show_xhr_msg(i,t)})},onAddJudge:function(t){var i=a(t.target);if(this.tbodyJudge.find("[data-username='".concat(a("#add-judge-username").val(),"']")).length>0)alert(i.attr("data-nonunique-msg"));else{i.prop("disabled",!0);var n={short_name:this.data.short_name,username:a("#add-judge-username").val(),may_clarify:a("#add-judge-may-clarify").is(":checked"),csrf_token:this.data.csrf_token};a.ajax({type:"POST",url:e.f,contentType:"application/json",data:JSON.stringify(n),context:this}).always(function(){a("#add-judge-username").focus()}).done(function(t){a("#add-judge-username").val(""),a("#add-judge-may-clarify").prop("checked",!0),this.addJudgeRow(t.response,!0)}).fail(function(t){i.prop("disabled",!1),r.error.show_xhr_msg(i,t)})}},onAddTeam:function(t){var i=a(t.target),n=i.closest("tr").find(":input");n.prop("disabled",!0);var s={short_name:this.data.short_name,team_name:a("#add-team-name").val(),csrf_token:this.data.csrf_token};this.data.is_privileged&&(s.penalty_adjustment=a("#add-team-penalty").val()),a.ajax({type:"POST",url:e.k,contentType:"application/json",data:JSON.stringify(s),context:this}).always(function(){n.prop("disabled",!1)}).done(function(t){a("#add-team-name").val(""),this.data.is_privileged&&a("#add-team-penalty").val(0),this.addTeamRow(t.response.team,!0,!0)}).fail(function(t){r.error.show_xhr_msg(i,t)})},onRemoveBannerClick:function(t){var i=a(t.target);i.prop("disabled",!0),a.ajax({type:"DELETE",url:e.d,contentType:"application/json",data:JSON.stringify({short_name:this.data.short_name,csrf_token:this.data.csrf_token})}).always(function(){i.prop("disabled",!1)}).done(function(){i.hide(),a("#session_banner").remove()}).fail(function(t){r.error.show_xhr_msg(i,t)})},createSession:function(){this.btnCreateSession.prop("disabled",!0);var t=this.getSessionTimeUTC();if(null!==t){var e={session_name:a("#session-name").val().trim(),start_time:"infinity"===t?"infinity":t.toISOString(),duration:this.parse_formatted_interval(this.txtDuration.val()),is_open:a("#is-open").is(":checked"),session_abbreviated_name:a("#session-abbreviated-name").val(),csrf_token:this.data.csrf_token};if(this.data.existing&&a.extend(e,{old_short_name:this.data.short_name}),this.data.is_privileged){var i=this.getFlexibleEndTimeUTC(),n="infinity"===i||null===i?i:i.toISOString();a.extend(e,{cutoff:this.parse_formatted_interval(this.txtCutoff.val()),short_name:this.txtShortName.val(),is_ranked:a("#is-ranked").is(":checked"),show_first_to_solve:a("#show-first-to-solve").is(":checked"),show_group_leaders:a("#show-group-leaders").is(":checked"),show_flags:a("#show-flags").is(":checked"),show_logos:a("#show-logos").is(":checked"),submission_penalty:a("#submission-penalty").val(),scoreboard_limit:a("#scoreboard-limit").val(),scoreboard_submission_threshold:a("#scoreboard-submission-threshold").val(),scoreboard_solved_threshold:a("#scoreboard-solved-threshold").val(),timestep_in_seconds:a("#timestep-in-seconds").val(),autofinalize:a("#autofinalize").is(":checked"),flexible:this.flexibleStartTimesEnabled,flexible_endtime:n,standings_type:a("#standings-type").val(),classification:a("#classification").val()})}if(this.data.is_privileged){e.banner_image=null;var s=document.getElementById("banner-image");if(s.files&&s.files[0]){var o=new FileReader;o.onload=function(t){e.banner_image=btoa(t.target.result),this.internalCreateSession(e)}.bind(this),o.readAsBinaryString(s.files[0])}else this.internalCreateSession(e)}else this.internalCreateSession(e)}},internalCreateSession:function(i){a.ajax({type:"PUT",url:e.e,contentType:"application/json",data:JSON.stringify(i),context:this}).always(function(){this.btnCreateSession.prop("disabled",!1)}).done(function(e){t.location.replace(e.response.redirect)}).fail(function(t){r.error.show_xhr_msg(this.btnCreateSession,t)})},publishSession:function(){if(t.confirm("Are you sure you want to publish? Publishing cannot be undone.")){this.btnPublishSession.prop("disabled",!0),this.spanPublishProgress.html('<i class="fa fa-spinner fa-spin"></i>');var i={csrf_token:this.data.csrf_token,short_name:this.data.short_name};a.ajax({type:"PUT",url:e.h,contentType:"application/json",data:JSON.stringify(i),context:this}).done(function(){this.spanPublishProgress.html('<i class="glyphicon glyphicon-ok"></i>'),t.location.reload(!0)}).fail(function(t){this.spanPublishProgress.html('<i class="glyphicon glyphicon-remove"></i>'),this.btnPublishSession.prop("disabled",!1),r.error.show_xhr_msg(this.btnPublishSession,t)})}},getTimeFromString:function(t){if(!/^\d\d\d\d-\d\d-\d\d \d\d:\d\d(:\d\d)?$/.test(t))return null;var e=t.split(" "),i=e[0],s=e[1];return Object(n.b)(i)&&Object(n.c)(s)?new Date("".concat(i,"T").concat(s,"Z")):null},getSessionTimeUTC:function(){var t=this.txtStartTime.val();return"infinity"===t?t:this.getTimeFromString(t)},getFlexibleEndTimeUTC:function(){if(!this.flexibleStartTimesEnabled)return null;var t=this.txtFlexibleEndTime.val();return"infinity"===t?t:this.getTimeFromString(t)},parse_formatted_interval:function(t){var e=/^(\d+):([0-5]\d)(?::([0-5]\d))?$/.exec(t);if(null===e)return null;var i=60*(60*+e[1]+ +e[2])+(+e[3]||0);return i>this.MAX_INT_32?null:i},format_seconds:function(t){var e=(t=Math.floor(t))%60,i=Math.floor(t/60),s=i%60,a=Math.floor(i/60);return"".concat(a,":").concat(Object(n.d)(s),":").concat(Object(n.d)(e))},format_minutes:function(t){var e=(t=Math.floor(t))%60,i=Math.floor(t/60);return"".concat(i,":").concat(Object(n.d)(e))},areTimeFieldsChanged:function(){if(this.startTimeVal!==this.txtStartTime.val()||this.durationVal!==this.txtDuration.val())return!0;if(this.data.is_privileged){if(this.cutoffVal!==this.txtCutoff.val())return!0;var t=this.flexibleStartTimesEnabled?this.txtFlexibleEndTime.val():null;if(this.flexibleEndTimeVal!==t)return!0}return!1},validateStartTime:function(){var t=this.getSessionTimeUTC(),e="Invalid start time";if(null===t)return this.spanStartHint.text(e),this.spanFinishHint.text(e),this.data.is_privileged&&this.spanCutoffHint.text(e),!1;var i="infinity"!==t&&t<new Date;return this.spanStartHint.text(t.toString()+(i?" (in the past!)":"")),!0},validateDuration:function(){var t=this.parse_formatted_interval(this.txtDuration.val());if(null===t)return this.spanFinishHint.text("Invalid duration"),this.data.is_privileged&&this.spanCutoffHint.text("Invalid duration"),!1;if(!this.data.is_privileged&&t>this.MAX_UNPRIVILEGED_DURATION)return this.spanFinishHint.text("Maximal duration is limited to 168 hours"),!1;if(this.flexibleStartTimesEnabled)this.spanFinishHint.text("n/a");else{var e=this.getSessionTimeUTC(),i="infinity"===e?"infinity":new Date(e.getTime()+1e3*t);this.spanFinishHint.text(i.toString())}return!0},validateCutoff:function(){if(!this.data.is_privileged)return!0;var t=this.parse_formatted_interval(this.txtDuration.val()),e=this.parse_formatted_interval(this.txtCutoff.val());if(null===e||e>t)return this.spanCutoffHint.text("Invalid cutoff"),!1;if(0===e)this.spanCutoffHint.text("None");else{var i,n=this.getSessionTimeUTC(),s=t-e;i="infinity"===n?"infinity":this.flexibleStartTimesEnabled?"start + ".concat(this.format_seconds(s)):new Date(n.getTime()+1e3*s).toString(),this.spanCutoffHint.text(i)}return!0},validateFlexibleEndTime:function(){if(!this.data.is_privileged||!this.flexibleStartTimesEnabled)return!0;var t=this.getSessionTimeUTC(),e=this.getFlexibleEndTimeUTC();return null===e?(this.spanFlexibleFinishHint.text("Invalid end time"),!1):null!==t&&"infinity"!==e&&"infinity"!==t&&t>e?(this.spanFlexibleFinishHint.text("End time is before start time"),!1):(this.spanFlexibleFinishHint.text(e.toString()),!0)},modifyTimeHints:function(){this.areTimeFieldsChanged()&&(this.timehintsValid=!0,this.startTimeVal=this.txtStartTime.val(),this.durationVal=this.txtDuration.val(),this.data.is_privileged&&(this.cutoffVal=this.txtCutoff.val(),this.flexibleEndTimeVal=this.flexibleStartTimesEnabled?this.txtFlexibleEndTime.val():null),this.timehintsValid=this.validateStartTime()&&this.validateDuration()&&this.validateCutoff(),this.validateFlexibleEndTime()||(this.timehintsValid=!1),this.data.existing||this.updateSaveButton())},modifyStandingsTypeHints:function(){var t=this.selStandingsType[0],e=t.options[t.selectedIndex];this.spanStandingsTypeHint.text(e.getAttribute("data-desc"))},addProblemRow:function(t,e){var i=a(this.problem_tmpl(t)),n=e?i.children("td").children("div"):a();i.find(".problem-remove").bind("click",this.removeProblem.bind(this)),n.attr("style","display: none;"),a("#tblProblems tbody").append(i),n.slideDown("fast")},removeProblem:function(t){var i=a(t.target),n=i.closest("tr"),s=i.closest("tr").find(":input");s.prop("disabled",!0);var o={short_name:this.data.short_name,problem_name:n.attr("data-name"),csrf_token:this.data.csrf_token};a.ajax({type:"DELETE",url:e.g,contentType:"application/json",data:JSON.stringify(o),context:this}).done(function(t){this.replaceProblems(t.response.problems)}).fail(function(t){s.prop("disabled",!1),r.error.show_xhr_msg(i,t),this.resetProblems()})},resetProblems:function(){a("#tblProblems tbody").empty(),this.data.selected_problems.forEach(this.addProblemRow,this);var t=a(this.data.all_problem_names).not(a.map(this.data.selected_problems,function(t){return t.name})).get();a("#problems").replaceWith(a('<datalist id="problems" />').append(a.map(t,function(t){return a("<option />").attr("value",t)})))},replaceProblems:function(t){this.data.selected_problems=t,this.resetProblems()},addJudgeRow:function(t,e){var i=a(this.judge_tmpl(t)),n=e?i.children("td").children("div"):a();i.find(".judge-remove").bind("click",this.removeJudge.bind(this)),i.find(".judge-may-clarify").bind("change",this.updateJudge.bind(this)),n.attr("style","display: none;"),this.tbodyJudge.append(i),n.slideDown("fast")},removeJudge:function(t){var i=a(t.target);i.prop("disabled",!0);var n=i.closest("tr"),s={short_name:this.data.short_name,username:n.attr("data-username"),csrf_token:this.data.csrf_token};a.ajax({type:"DELETE",url:e.f,contentType:"application/json",data:JSON.stringify(s),context:this}).done(function(){n.children("td").children("div").slideUp("fast",function(){n.remove()})}).fail(function(t){i.prop("disabled",!1),r.error.show_xhr_msg(i,t)})},updateJudge:function(t){var i=a(t.target);i.prop("disabled",!0);var n=i.closest("tr"),s={short_name:this.data.short_name,username:n.attr("data-username"),may_clarify:n.find(".judge-may-clarify").is(":checked"),csrf_token:this.data.csrf_token};a.ajax({type:"PUT",url:e.f,contentType:"application/json",data:JSON.stringify(s),context:this}).always(function(){i.prop("disabled",!1)}).done(function(t){n.find(".judge-username a").text(t.username).attr("href",t.profile_url),n.find(".judge-name").text(t.name),n.find(".judge-may-clarify").prop("checked",t.may_clarify)}).fail(function(t){r.error.show_xhr_msg(i,t)})},addTeamRow:function(t,e,i){var n=o("team_tmpl"),s=o("team_member_tmpl"),r=a(n(t));t.members.forEach(function(t){var i=a(s(t));i.find(".team-member-remove").bind("click",this.removeTeamMember.bind(this)),r.find("li.team-member-add").before(i),t.accepted||(!0===e?a("#pending-invitation-info").slideDown("fast"):a("#pending-invitation-info").show())},this),!0===i?r.find(".show-no-edit").hide():r.find(".show-edit").hide(),r.find(".team-member-accepted").prop("checked",this.autoaccept),r.find(".team-edit").bind("click",function(){a(this).closest("tr").find(".show-edit, .show-no-edit").toggle()}),r.find(".team-done").bind("click",this.updateTeam.bind(this)),r.find(".team-name").keypress(function(t){var e=r.find("button.team-done");13!==t.keyCode||e.prop("disabled")||e.click()}),r.find(".team-remove").bind("click",this.removeTeam.bind(this)),r.find("button.team-member-add").bind("click",this.onAddTeamMember.bind(this)),r.find("input.team-member-username").bind("change keyup input",function(){r.find("button.team-member-add").prop("disabled",""===a(this).val())}),r.find("input.team-member-username").keyup(function(t){var e=r.find("button.team-member-add");13!==t.keyCode||e.prop("disabled")||e.click()}),this.tbodyTeam.append(r),!0===i&&r.find(".team-member-username").focus()},onAddTeamMember:function(t){var i=a(t.target),n=i.closest("li");i.prop("disabled",!0);var s=i.closest("tr"),o={team_id:s.attr("data-team-id"),username:n.find("input.team-member-username").val(),accepted:this.autoaccept,csrf_token:this.data.csrf_token};a.ajax({type:"POST",url:e.l,contentType:"application/json",data:JSON.stringify(o),context:this}).always(function(){s.find("input.team-member-username").focus()}).done(function(t){var e=a(this.team_member_tmpl(t.response.team_member));e.find(".team-member-remove").bind("click",this.removeTeamMember.bind(this)),n.before(e),s.find("input.team-member-username").val(""),e.accepted||a("#pending-invitation-info").slideDown("fast")}).fail(function(t){i.prop("disabled",!1),r.error.show_xhr_msg(i,t)})},removeTeam:function(t){var i=a(t.target),n=i.closest("tr"),s=n.find(":input");s.prop("disabled",!0);var o={short_name:this.data.short_name,team_id:n.attr("data-team-id"),csrf_token:this.data.csrf_token};a.ajax({type:"DELETE",url:e.k,contentType:"application/json",data:JSON.stringify(o),context:this}).done(function(){n.children("td").children("div").slideUp("fast",function(){n.remove()}),a('[data-invitation-state="pending"]').length||a("#pending-invitation-info").slideUp("fast")}).fail(function(t){s.prop("disabled",!1),n.find("button.team-member-add").prop("disabled",""===n.find(".team-member-username").val()),r.error.show_xhr_msg(i,t)})},updateTeam:function(t){var i=a(t.target),n=i.closest("tr"),s=n.find(":input");s.prop("disabled",!0);var o={short_name:this.data.short_name,team_id:n.attr("data-team-id"),team_name:n.find("input.team-name").val(),csrf_token:this.data.csrf_token};this.data.is_privileged&&(o.penalty_adjustment=n.find("input.team-penalty").val()),a.ajax({type:"PUT",url:e.k,contentType:"application/json",data:JSON.stringify(o),context:this}).always(function(){s.prop("disabled",!1),n.find("button.team-member-add").prop("disabled",""===n.find(".team-member-username").val()),n.find(".show-edit, .show-no-edit").toggle()}).done(function(t){var e=t.response.team;n.find("input.team-name").val(e.team_name),n.find("span.team-name").text(e.team_name),this.data.is_privileged&&(n.find("input.team-penalty").val(e.penalty_adjustment),n.find("span.team-penalty").text(e.penalty_adjustment))}).fail(function(t){r.error.show_xhr_msg(i,t)})},removeTeamMember:function(t){var i=a(t.target);i.prop("disabled",!0);var n=i.closest("li"),s={team_id:i.closest("tr").attr("data-team-id"),username:n.attr("data-username"),csrf_token:this.data.csrf_token};a.ajax({type:"DELETE",url:e.l,contentType:"application/json",data:JSON.stringify(s),context:this}).done(function(){n.remove(),a('[data-invitation-state="pending"]').length||a("#pending-invitation-info").slideUp("fast")}).fail(function(t){i.prop("disabled",!1),r.error.show_xhr_msg(i,t)})}})}).call(this,i(2))},function(t,e,i){(function(t){var e=t,i=e.jQuery,n=e.tmpl;i.extend(i.ns("Kattis.views.contest.resolver"),{init:function(){for(var e=this.data,s=e.info,a=s.cutoff,o=s.length,r=0;r<e.teams.length;r++)e.teams[r].name=this.team_names[e.teams[r].id];i(function(i){var s=t.open("","Kattis Resolver","width=450, height=400");function r(t){return i(s.document.getElementById(t))}function l(){i(".team_problem_cell").css("width","".concat(r("resolver_cell_width").val(),"px"))}s.document.open(),s.document.write(i("#resolver_controls_wrapper").html()),s.document.title="Controls",r("resolver_cell_width").change(l);var h=n("table_header_tmpl"),d=n("team_row_tmpl");function c(e,n){i("html, body").stop().animate({scrollTop:e.offset().top-i(t).height()/2+e.height()/2},200,function(){n&&n()})}function u(t,e){for(var n=i(d({team:t,problems:e})),s=n.children(".rank"),r=n.children(".score"),l=n.children(".time"),h=n.children(".team_problem_cell"),c={},u=0;u<e.length;u++){c[e[u].id]={cell:i(h[u]),score:0,submissions:0,pending:[],last_improvement:0,max_score:e[u].max_score}}return{id:t.id,name:t.name,row:n,cur_row:n,no_cell:s,points_cell:r,time_cell:l,problems:c,points:0,get_last_improvement:function(){for(var t=0,e=0;e<g.length;e++)t=Math.max(t,this.problems[g[e]].last_improvement);return t},reset:function(){this.no_cell.text(""),this.points_cell.text("0"),this.time_cell.text("0"),this.points=0;for(var t=0;t<g.length;t++){var e=g[t];this.problems[e].score=0,this.problems[e].submissions=0,this.problems[e].last_improvement=0,this.problems[e].pending=[],this.problems[e].cell.empty(),this.problems[e].cell.removeClass("solved attempted partial-score pending")}},handle_submission:function(t,e){var i=this.problems[t.problem],n=t.time>=(o-a)/60;if(n&&!e||(i.submissions+=1,this.points-=i.score,t.score>i.score+1e-9?(i.score=t.score,i.last_improvement=Math.floor(t.time)):Math.abs(t.score-i.score)<1e-9&&(i.last_improvement=Math.min(i.last_improvement,Math.floor(t.time))),this.points+=i.score),n)if(e){for(var s=0;s<i.pending.length&&i.pending[s]!==t;)s+=1;s<i.pending.length&&(i.pending[s]=i.pending[i.pending.length-1],i.pending.pop()),i.pending.sort(function(t,e){return e.time-t.time})}else i.pending.push(t);this.points_cell.text(this.points),this.time_cell.text(this.get_last_improvement()),i.cell.html("".concat(i.score,"<br/>").concat(i.submissions).concat(i.pending.length>0?"+".concat(i.pending.length):"")),i.cell.removeClass("solved attempted partial-score pending"),Math.abs(i.score-i.max_score)<1e-9?i.cell.addClass("solved"):i.pending.length>0?i.cell.addClass("pending"):0===i.score?i.cell.addClass("attempted"):i.cell.addClass("partial-score")}}}function p(t,e,n){t.sort(function(t,e){if(t.points!==e.points)return e.points-t.points;var i=t.get_last_improvement(),n=e.get_last_improvement();return Math.abs(i-n)>1e-9?i-n:t.name!==e.name?t.name.localeCompare(e.name):0});var s=0;!function a(){if(s===t.length)n&&n();else{var o=t[s].row.index()+1,l=s+1;if(t[s].points>0?t[s].no_cell.text(l):t[s].no_cell.text(""),l<o)if(e){var h=parseInt(r("resolver_row_animate_time").val(),10)*(Math.abs(l-o)+1);!function(t,e,n,s,a,o){for(var r=s.offset(),l=s.height(),h=s.width(),d=[],c=0;c<2;c++)d.push(i("<tr></tr>").append(i("<td></td>",{colspan:4+m.length}).css({height:"0",margin:"0",padding:"0"})));d[0].height(0).width(h),s.replaceWith(d[1]),t.cur_row=d[1],d[1].height(l).width(h),s.height(l).width(h);var u=i("<div></div>");u.append(i("<table></table>").addClass("table table-kattis kattis-table-contest-standings").css({"border-top":"none","border-radius":"none"}).append(i("<tbody></tbody>").append(s))).width(h).height(l).css({position:"absolute",top:"".concat(r.top,"px"),left:"".concat(r.left+1,"px")}).appendTo(i("#wrapper")),0===a?d[0].prependTo(i("#standings tbody")):d[0].insertAfter(n[a-1].row),t.cur_row=d[0],d[1].animate({height:"0"},e),d[0].animate({height:l},e),u.animate({top:"".concat(d[0].offset().top,"px")},e,function(){s.width("auto").height("auto"),d[0].replaceWith(s),t.cur_row=s,u.remove(),d[1].remove(),o&&o()})}(t[s],h,t,t[s].row,l-1,function(){s+=1,a()})}else t[s].row.detach(),1===l?t[s].row.prependTo(i("#standings tbody")):t[s].row.insertAfter(t[s-1].row),s+=1,a();else s+=1,a()}}()}var f=h({all_captions:!0,problems:e.problems});i("#standings thead").append(f);for(var m=e.problems,g=[],v=0;v<e.problems.length;v++)g.push(e.problems[v].id);for(var b={},_=[],y=[],x=0;x<e.teams.length;x++){var w=new u(e.teams[x],m);b[w.id]=w,_.push(w.id),i("#standings tbody").append(w.row),y.push(w)}i("#standings tbody").append(h({all_captions:!1,problems:e.problems}));var k=e.runs;k.sort(function(t,e){return t.time-e.time});for(var T=[],S=0;S<k.length;S++){var C=k[S];C.judged&&"CE"!==C.result&&T.push(C)}var F=function(t){var e=0,n=y.length-1,s=0,a=!1,o=!1,l=!1,h=["resolver_reset","resolver_playback_step","resolver_playback_play","resolver_playback_pause","resolver_playback_skip","resolver_resolve_step","resolver_resolve_play","resolver_resolve_pause"];function d(){for(var t=0;t<h.length;t++)r(h[t]).prop("disabled",!0).css("color","gray")}function u(){var i={};e>0&&!l&&(i.resolver_reset=!0),e<t.length&&(l?i.resolver_playback_pause=!0:(i.resolver_playback_step=!0,i.resolver_playback_play=!0,i.resolver_playback_skip=!0)),e>=t.length&&n>=0&&(l?i.resolver_resolve_pause=!0:(i.resolver_resolve_step=!0,i.resolver_resolve_play=!0));for(var s=0;s<h.length;s++){var a=i.hasOwnProperty(h[s]);r(h[s]).prop("disabled",!a).css("color",a?"black":"gray")}}return{reset:function(){e=0,n=y.length-1,i("#standings tr").removeClass("highlight"),i("#standings td").removeClass("resolve-problem"),a=!1,o=!1,d();for(var t=0;t<_.length;t++)b[_[t]].reset();p(y,!1,u)},playback_step:function(){d();var i=t[e];b[i.team].handle_submission(i,!1),e+=1,p(y,!0,u)},playback_skip:function(){for(d();e<t.length;){var i=t[e];b[i.team].handle_submission(i,!1),e+=1}p(y,!1,u)},playback_play:function(){l=!0;var i=this,n=!0,s=!1;function a(){s||(i.playback_stop=null,l=!1,u())}function o(){var i=0===e?0:t[e-1].time;return 60*(t[e].time-i)*1e3*parseFloat(r("resolver_time_multiplier").val())}var h=null;this.playback_pause=function(){n=!1,d(),clearTimeout(h),a()},h=setTimeout(function i(){if(n){var r=t[e];b[r.team].handle_submission(r,!1),e+=1,s=!0,p(y,!0,function(){s=!1,e<t.length&&n?h=setTimeout(i,o()):a()})}else a()},o()),u()},resolve_step:function(t,e){function i(){t||u(),e&&e()}if(t||d(),a)if(o){for(var r=y[n].problems[g[s]],l=-1,h=0;h<r.pending.length;h++)r.pending[h].score>r.score&&(l<0||r.pending[h].score<l)&&(l=r.pending[h].score);l=Math.max(l,r.score);for(var f=0;f<r.pending.length;f++)r.pending[f].score<=l&&(y[n].handle_submission(r.pending[f],!0),f=-1);var v=y[n].row;y[n].problems[g[s]].cell.removeClass("resolve-problem"),c(y[n].row),p(y,!0,function(){v.removeClass("highlight"),a=!0,o=!1,s=0,y[n].row.addClass("highlight"),i()})}else{for(;s<m.length&&!(y[n].problems[g[s]].pending.length>0);)s+=1;s<m.length?(y[n].problems[g[s]].cell.addClass("resolve-problem"),o=!0):(y[n].row.removeClass("highlight"),s=0,(n-=1)>=0&&(y[n].row.addClass("highlight"),a=!0,o=!1)),n>=0&&c(y[n].row),i()}else y[n].row.addClass("highlight"),c(y[n].row),a=!0,i()},resolve_play:function(t){if(!(n<t)){l=!0;var e=this,i=!0,s=!1,a=null;this.resolve_pause=function(){i=!1,d(),clearTimeout(a),o()},u(),function l(){i?(s=!0,e.resolve_step(!0,function(){s=!1,n>=t?a=setTimeout(l,parseInt(r("resolver_resolve_timestep").val(),10)):o()})):o()}()}function o(){s||(e.resolve_stop=null,l=!1,u())}}}}(T);F.reset(),r("resolver_controls").submit(function(){return!1}),r("resolver_reset").click(function(){F.reset()}),r("resolver_playback_step").click(function(){F.playback_step()}),r("resolver_playback_play").click(function(){F.playback_play()}),r("resolver_playback_pause").click(function(){F.playback_pause()}),r("resolver_playback_skip").click(function(){F.playback_skip()}),r("resolver_resolve_step").click(function(){F.resolve_step()}),r("resolver_resolve_play").click(function(){F.resolve_play(parseInt(r("resolver_resolve_play_upto").val(),10))}),r("resolver_resolve_pause").click(function(){F.resolve_pause()}),i(s.document).on("keydown",function(t){var e=[];39===t.keyCode?e=["resolver_playback_step","resolver_resolve_step"]:32===t.keyCode&&(e=["resolver_playback_play","resolver_playback_pause","resolver_resolve_play","resolver_resolve_pause"]);for(var i=0;i<e.length;i++){var n=r(e[i]);if(!n.prop("disabled")){n.click();break}}}),l()})}})}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e=i(0),n=t.jQuery,s=n.ns("Kattis");n.extend(n.ns("Kattis.views.contest.flexible_start"),{init:function(){},start:function(i){var a={session_id:this.data.session_id,csrf_token:this.data.csrf_token};n.ajax({type:"POST",url:e.j,contentType:"application/json",data:JSON.stringify(a)}).done(function(){t.location.reload()}).fail(function(t){s.error.show_xhr_msg(n(i),t)})}})}).call(this,i(2))},function(t,e,i){(function(t){var e=t,i=e.ace,n=e.getAceMode,s=e.jQuery;s.extend(s.ns("Kattis.views.submissions.create"),{init:function(){var t=this;this.editors=[],this.initProblemSelector(),this.initLanguageSelector(),this.initProblems(),this.initLanguages(),this.initEditors(),s("#submit-solution-form").on("submit",this.setEditorValues.bind(this));var e=s("#sub_files_input");e.on("change",this.onSubmissionFilesChanged.bind(this)),e.on("keydown",this.onSubmissionFilesKeypressed.bind(this)),e.each(function(e,i){t.update_file_list(i)}),this.mainBox(this.data.languages.default,this.data.form_mainclass),s('[name="editor_visible"]').click(this.onSwitchToEditor.bind(this)),s("#file-upload").click(this.onSwitchToFileUpload.bind(this)),s("#cancel").click(this.onCancelClicked.bind(this))},initProblemSelector:function(){var t=this.data.is_contest?"fulltitle":"problem_name";s("#problem_select").select2({placeholder:this.data.problems.placeholder,data:this.data.problems.available.map(function(e){return{id:e.problem_name,text:e[t]}})})},initLanguageSelector:function(){var t=s("#language_select");t.select2({placeholder:this.data.languages.placeholder,data:this.data.languages.available.map(function(t){return{id:t.language_name,text:t.language_name}})}),t.on("change",this.onLanguageChanged.bind(this))},initProblems:function(){this.problems={},this.data.problems.available.forEach(function(t){if(this.problems[t.problem_name]=t.problem_name,this.data.is_contest){var e=t.fulltitle.split(" - ")[0].toLowerCase();this.problems[e]=t.problem_name}},this)},initLanguages:function(){this.languages={},this.data.languages.available.forEach(function(t){this.languages[t.language_name]=!0},this)},onLanguageChanged:function(){this.setLanguage(this.getSelectedLanguage(),"")},initEditors:function(){var t=this;s(".source-code-editor").each(function(){var e=t.newEditor(this.id),i="ace/mode/".concat(n(t.data.languages.default));e.setTheme("ace/theme/textmate"),e.getSession().setMode(i),e.setShowPrintMargin(!1),e.session.setUseWorker(!1),s(this).parents("#editor_resize").resizable({handles:"se",grid:[1e4,1],resize:function(){e.resize()}})})},mainBox:function(e,i){var n,a=this.data.filecount>1||this.editors.length>1,o="",r="",l=!0,h=!0;if(0===(e=e.toLowerCase()).indexOf("java")&&0!==e.indexOf("javascript")?(n="java",h=!1):0===e.indexOf("javascript")&&a?n="javascript":0===e.indexOf("rust")?n="rust":0===e.indexOf("pascal")?n="pascal":0===e.indexOf("php")&&a?n="php":0===e.indexOf("python")&&a?n="python":0===e.indexOf("ruby")&&a?n="ruby":0===e.indexOf("scala")?(n="scala",h=!1):0===e.indexOf("kotlin")?(n="kotlin",h=!1):0===e.indexOf("common lisp")?n="lisp":l=!1,l){var d=this.data.main_box_msg[n];o=d.help,r=d.label}var c=s("#mainBox"),u=c.find("#main_select");i||(u.length>0&&(i=u.val()),a&&h&&(i=this.adjustFilename(i)));var p="";l&&(p=["<div class='form-group'>","<label for='main_select' title='".concat(o,"'>"),r,"</label>","<input class='form-control' id='main_select' title='".concat(o,"' type='text' name='mainclass' ")+"value='".concat(t.escapeHtml(i),"' tabindex='4' />"),"</div>"].join("")),c.html(p)},hideEditor:function(){s("input[name='type']").val("files"),s("#editor_resize").css("display","none")},showEditor:function(){s("input[name='type']").val("editor"),s("#editor_resize").css("display","block")},newEditor:function(t){var e=i.edit(t);return this.editors.push({name:t,editor:e}),e},setEditorValues:function(){for(var t=this.editors,e=0;e<t.length;++e){var i="".concat(t[e].name,"_submit"),n=t[e].editor.getValue();s("#".concat(i)).val(n)}},setEditorLanguage:function(t){for(var e="ace/mode/".concat(n(t)),i=this.editors,s=0;s<i.length;++s)i[s].editor.getSession().setMode(e)},setLanguage:function(t,e){this.setEditorLanguage(t),this.mainBox(t,e)},getSelectedLanguage:function(){return s("#language_select").val()},adjustFilename:function(t){if(!s("#file_dialog").is(":visible"))return t;var e=s("#sub_files_input")[0].files;if(!e)return t;for(var i=0;i<e.length;i++)if(/^[Mm]ain\./.test(e[i].name))return e[i].name;for(var n=0;n<e.length;n++)if(e[n].name===t)return t;return e[0]?e[0].name:t},fileDialogEnabled:function(t,e){var i=this.getSelectedLanguage();this.data.filecount=t.files?t.files.length:1,this.mainBox(i,e||"")},editorEnabled:function(){var t=this.getSelectedLanguage();this.data.filecount=1,this.mainBox(t,"")},submitForm:function(t){"function"==typeof t.submit?t.submit():t.submit.click()},isLanguageAvailable:function(t){return!!this.languages[t]},languageFromExtension:function(t,e){var i={c:"C","c#":"C#","c++":"C++",C:"C++",cc:"C++",cpp:"C++",cs:"C#",cxx:"C++",go:"Go",hs:"Haskell",java:"Java",js:"JavaScript (Node.js)",m:"Objective-C",pas:"Pascal",php:"PHP",pl:"Prolog",rb:"Ruby",scala:"Scala",sc:"Scala",kt:"Kotlin",rs:"Rust",ml:"OCaml",lisp:"Common Lisp",cl:"Common Lisp",cob:"COBOL",cbl:"COBOL",cpy:"COBOL"};if("C"===t)return"C++";if(t=t.toLowerCase(),i.hasOwnProperty(t))return i[t];if("h"===t){for(var n=!1,s=0;s<e.length;s++)"c"===e[s]&&(n=!0);return!this.isLanguageAvailable("C++")||this.isLanguageAvailable("C")&&n?"C":"C++"}return null},isPython2:function(t){if(!this.isLanguageAvailable("Python 2"))return!1;if(!this.isLanguageAvailable("Python 3"))return!0;var e=/^\s*\bprint\b *[^ (),\]]|\braw_input\b/,i=t.split("\n");if(0===t.lastIndexOf("#!",0)){if(-1!==i[0].indexOf("python2"))return!0;if(-1!==i[0].indexOf("python3"))return!1}for(var n=0;n<i.length;n++){var s=i[n],a=s.indexOf("#");if(-1!==a&&(s=s.substr(0,a)),e.test(s))return!0}return!1},readFile:function(t,e){var i=e.scope||this,n=new FileReader;n.onload=function(){var t=n.result,s=t.indexOf("base64,");-1!==s?(t=atob(t.substr(s+7)),e.success.call(i,t)):e.failure.call(i)},n.onabort=function(){e.failure.call(i)},n.onerror=n.onabort,n.readAsDataURL(t)},guessProblem:function(t,e){if(t)for(var i=0;i<t.length;i++){var n=t[i].name.toLowerCase(),s=n.indexOf(".");if(-1!==s&&(n=n.substr(0,s)),this.problems.hasOwnProperty(n))return void e.call(this,this.problems[n])}},extractMainFromPascal:function(t,e){return/^\s*[Pp]rogram\b/.test(e)?t:null},extractMainFromRust:function(t,e){return/\bfn main\(\)/.test(e)?t:null},extractMainFromJava:function(t,e){if(!/ main\s*\(/.test(e))return null;if(-1===e.indexOf("class ".concat(t))){var i=e.match(/\bclass\s*(\w+)/);t=i?i[1]:t}var n=e.match(/(?:\n|^)package +([\w.]+) *;/);return(n?"".concat(n[1],"."):"")+t},extractMainFromScala:function(t,e){if(!/ main\s*\(/.test(e))return null;if(-1===e.indexOf("class ".concat(t))&&-1===e.indexOf("object ".concat(t))){var i=e.match(/\b(?:class|object)\s*(\w+)/);t=i?i[1]:t}var n=e.match(/(?:\n|^)package +([\w.]+)/);return(n?"".concat(n[1],"."):"")+t},extractMainFromKotlin:function(t,e){if(!/\bfun\s+main\s*\(/.test(e))return null;var i=e.match(/(?:\n|^)package +([\w.]+)/);return(i?"".concat(i[1],"."):"")+t},guessMain:function(t,e,i,n,s,a){for(var o=0;o<t.length;o++)if(/^[Mm]ain\.\w+$/.test(t[o].name)&&this.languageFromExtension(e[o],e)===i)return void a(s(t[o].name));var r=0,l=function(){if(r>=t.length)a("");else{var o=t[r],h=o.name.split(".").reverse()[0]||"";if(r+=1,this.languageFromExtension(h,e)!==i)return void l();this.readFile(o,{success:function(t){var e=n(s(o.name),t);e?a(e):l()},failure:l,scope:this})}}.bind(this);l()},guessPython:function(t,e){this.readFile(t,{success:function(t){e(this.isPython2(t)?"Python 2":"Python 3")},failure:function(){e("Python 3")},scope:this})},guessLanguage:function(t,e){for(var i=t?t.length:0,n=[],s=0;s<i;s++)n.push(t[s].name.split(".").reverse()[0]||"");function a(t){return t.split(".").slice(0,-1).join(".")}function o(t){var e=a(t);return"".concat(e.charAt(0).toUpperCase()+e.slice(1),"Kt")}function r(t){return t}for(var l=0;l<i;l++){var h=t[l],d=n[l],c=this.languageFromExtension(d,n),u=e.bind(null,c);if("Java"===c)return void this.guessMain(t,n,c,this.extractMainFromJava,a,u);if("Scala"===c)return void this.guessMain(t,n,c,this.extractMainFromScala,a,u);if("Kotlin"===c)return void this.guessMain(t,n,c,this.extractMainFromKotlin,o,u);if("Rust"===c)return void this.guessMain(t,n,c,this.extractMainFromRust,r,u);if("Common Lisp"===c){return void this.guessMain(t,n,c,function(t){return t},a,u)}if("Pascal"===c)return void this.guessMain(t,n,c,this.extractMainFromPascal,r,u);if(null!==c)return void e(c);if("py"===d)return void this.guessPython(h,e)}e()},update_file_list:function(t){var e=s(t).parent();if(e.removeClass("has_files"),0!==t.files.length){e.addClass("has_files");var i=e.find(".file_list");i.empty();for(var n=0;n<t.files.length;++n)i.append(s("<li/>").text(t.files[n].name))}},onSubmissionFilesChanged:function(t){var e=this,i=t.target;this.hideEditor(),s("#cancel").prop("disabled",!1),this.guessLanguage(i.files,function(t,n){if(t&&e.isLanguageAvailable(t)){var a=s("#language_select");a.val(t),a.trigger("change")}e.fileDialogEnabled(i,n)});var n=s("#problem_select");n&&!n.val()&&this.guessProblem(i.files,function(t){n.val(t),n.trigger("change")}),this.update_file_list(i)},onSubmissionFilesKeypressed:function(t){13===t.which&&t.ctrlKey&&this.submitForm(t.target.form)},onSwitchToEditor:function(){this.showEditor(),s("#file_dialog").hide(),s("#editor_dialog").show(),s("#cancel").prop("disabled",!1),this.editorEnabled()},onSwitchToFileUpload:function(){this.hideEditor(),s("#file_dialog").show(),s("#editor_dialog").hide(),s("#cancel").prop("disabled",!0)},onCancelClicked:function(){t.location=this.data.location}})}).call(this,i(2))},function(t,e,i){(function(t){var e,i,n=t.jQuery;n.extend(n.ns("Kattis.views.recruiting.view_candidate"),(e={MIN_DIFFICULTY:1,MAX_DIFFICULTY:10,PDF_CURVE_STEPS:30,init:function(){this.checkModalDialogs(),this.data.has_recruiter_rights||this.drawGraph(),this.initTests()},checkModalDialogs:function(){["#assign-tasks","#request-ratings","#request-test"].forEach(function(e){t.location.hash===e&&n(e).modal("show")})},initTests:function(){var t=n("#test-summary");t.circliful(),0!==this.data.tests.length&&n(".circle-text-half").replaceWith(function(){var e=n.trim(n(this).text()),i=n.trim(t.data("link"));return i&&(e='<a href="'.concat(i,'">').concat(e,"</a>")),'<span class="circle-text-half" style="line-height: 179.31px; font-size: 40px;">'.concat(e,"</span>")})},getPixelRatio:function(e){var i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/i},rayleigh:function(t){var e=Math.pow(2.8385,2);return t/e*Math.exp(-t*t/(2*e))},renderPDFcurve:function(t,e){for(var i,n=[],s=0,a=0;a<this.PDF_CURVE_STEPS;++a){i=(this.MAX_DIFFICULTY-this.MIN_DIFFICULTY)*a/this.PDF_CURVE_STEPS+this.MIN_DIFFICULTY;var o=this.rayleigh(i);s=Math.max(s,o),n.push([i,o])}var r=t.height,l=t.width;e.translate(0,-77.5),e.beginPath(),e.moveTo(0,r);for(var h=0;h<n.length;++h){i=n[h][0]*l/(this.MAX_DIFFICULTY-this.MIN_DIFFICULTY+1);var d=r-n[h][1]*(r-77.5)/s*.9;e.lineTo(i,d)}e.lineTo(i,r),e.closePath(),e.fillStyle="#E7E7E7",e.fill()},drawGraphTail:function(t,e){if(this.data.is_set_hardest_accepted){var i=t.height,n=t.width;e.globalCompositeOperation="source-atop",e.beginPath();var s=this.data.hardest_accepted_array,a=this.data.hardest_accepted_after;e.moveTo(s.problem_difficulty*(n/10)-50,50),e.lineTo(a.problem_difficulty*(n/10)-50,50),e.lineTo(a.problem_difficulty*(n/10)-50,i),e.lineTo(s.problem_difficulty*(n/10)-50,i),e.closePath(),e.fillStyle="#449fe1",e.fill(),e.globalCompositeOperation="source-over"}},drawBreakpoint:function(t,e){for(var i=t.height,n=t.width,s=[this.data.recommendation_limit],a=[],o=0;o<s.length;o++)a.push(s[o]*(n/10)-50);for(var r=0;r<a.length;r++)e.beginPath(),e.lineWidth=10,e.strokeStyle="black",e.moveTo(a[r],20),e.lineTo(a[r],i),e.strokeStyle="#f0b034",e.stroke()},drawXAxisTicks:function(t,e){for(var i=t.height,n=t.width,s=1;s<=this.MAX_DIFFICULTY;s++)e.font="bold 24px Arial",e.fillStyle="#1E1E1E",e.fillText(s,n/10*s-57,i+36)},drawProblemsInfo:function(t,e){for(var i=t.height,n=t.width,s=[],a=[],o=[],r=0;r<this.data.values_to_plot.length;++r){var l=this.data.values_to_plot[r];s.push(l.problem_difficulty),!0===l.solved?o.push("#52BB50"):!1===l.solved?o.push("#F20708"):o.push("#C7C7C7")}for(var h=0;h<s.length;h++)a.push(s[h]*(n/10)-50);for(var d=this.data.height_top_offset,c=0;c<a.length;c++)e.beginPath(),e.lineWidth=2,e.strokeStyle="black",e.moveTo(a[c],d),e.lineTo(a[c],i),e.stroke();a.forEach(function(t,i){e.beginPath(),e.arc(t,d,10,0,2*Math.PI,!1),e.fillStyle=o[i],e.fill(),e.lineWidth=2,e.stroke()})},drawGraph:function(){var t=document.getElementById("curve");if(t){var e=this.data.initial_width,i=t.getContext("2d");t.width=2*e,t.height=360,t.style.width="".concat(e,"px"),t.style.height="".concat(180,"px"),i.scale(this.getPixelRatio,this.getPixelRatio),this.renderPDFcurve(t,i),this.drawXAxisTicks(t,i),this.drawGraphTail(t,i),this.drawBreakpoint(t,i),this.drawProblemsInfo(t,i)}}},i=!1,{init:function(){i||(i=!0,e.data=this.data,this.data=null,e.init())}}))}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e,n,s=i(0),a=i(1),o=t,r=o.jQuery,l=o.tmpl,h=r.ns("Kattis");r.extend(r.ns("Kattis.views.admin.course_offering_edit"),(e={init:function(){this.createBtn=r(".create-btn"),r(".field_toggle_null").on("change",this.onCheckboxClick.bind(this)),r("#offering_offering_short_name").on("keyup input",this.onOfferingShortNameChanged.bind(this)),r("#offering_offering_end").on("change keyup input",this.onOfferingEndChanged.bind(this)),r("#offering_offering_registration_key").on("change keyup input",this.onRegistrationKeyChanged.bind(this)),r(".course-offering-form input[pattern], .course-offering-form input[type=checkbox]").on("change keyup input",this.onFormFieldChanged.bind(this)),this.initTeachers(),this.initProblemgroups(),this.initSessions()},initTeachers:function(){this.teacher_tbody=r(".table-teachers tbody"),this.teacher_tmpl=l("teacher_tmpl"),r(".add-teacher-btn").on("click",this.onAddTeacher.bind(this)),r(".add-teacher-username").bind("change keyup input",function(){r(".add-teacher-btn").prop("disabled",""===r(this).val())}),r(".add-teacher-username").keypress(function(t){if(13===t.keyCode&&!r(".add-teacher-btn").prop("disabled"))return r(".add-teacher-btn").click(),t.preventDefault(),!1}),this.data.teachers.forEach(function(t,e){this.addTeacherRow({teacher_no:e,name:t.name,username:t.username,link:"".concat(s.o,"/").concat(t.username),teaching_assistant:t.teaching_assistant,teaching_assistant_checked:t.teaching_assistant?"checked":""},!1)},this),this.teacher_no=this.data.teachers.length},initProblemgroups:function(){this.problemgroup_tbody=r(".table-problemgroups tbody"),this.problemgroup_tmpl_old=l("problemgroup_tmpl_old"),this.problemgroup_tmpl_new=l("problemgroup_tmpl_new"),r(".add_problemgroup").on("click",this.onAddProblemGroup.bind(this)),r("#input_problem_group_name").select2({allowClear:!0,createSearchChoice:function(t,e){if(0===r(e).filter(function(){return 0===this.text.localeCompare(t)}).length)return{id:"0",text:t,exists:!1}},data:[],formatResult:function(t,e,i,n){return t.exists?n(t.text):"".concat(n(t.text)," <i>(new)</i>")}}),this.data.problemgroups.forEach(function(t,e){var i="";t.id&&(i=s.m.replace("{0}",this.data.course_short_name).replace("{1}",this.data.offering_short_name).replace("{2}",t.id)),this.addProblemgroupRow({problemgroup_no:e,id:t.id,name:t.name,link:i},!1)},this),this.problemgroup_no=this.data.problemgroups.length},initSessions:function(){this.session_tbody=r(".table-sessions tbody"),this.session_tmpl_old=l("session_tmpl_old"),this.session_tmpl_new=l("session_tmpl_new"),r(".add_session").on("click",this.onAddSession.bind(this)),this.data.sessions.forEach(function(t,e){var i=t.short_name?s.n.replace("{0}",t.short_name):"";this.addSessionRow({session_no:e,short_name:t.short_name,session_name:t.session_name,link:i},!1)},this),this.session_no=this.data.sessions.length},addTeacherRow:function(t,e){var i=r(this.teacher_tmpl(t)),n=e?i.children("td"):r();i.find(".remove-teacher-btn").bind("click",this.onRemoveTeacher.bind(this)),n.attr("style","display: none;"),this.teacher_tbody.append(i),n.slideDown("fast")},addProblemgroupRow:function(t,e){var i=void 0===t.id?this.problemgroup_tmpl_new:this.problemgroup_tmpl_old,n=r(i(t)),s=e?n.children("td"):r();n.find(".remove-problemgroup-btn").bind("click",this.onRemoveProblemGroup.bind(this)),s.attr("style","display: none;"),this.problemgroup_tbody.append(n),s.slideDown("fast")},addSessionRow:function(t,e){var i=void 0===t.short_name?this.session_tmpl_new:this.session_tmpl_old,n=r(i(t)),s=e?n.children("td"):r();n.find(".remove-session-btn").bind("click",this.onRemoveSession.bind(this)),s.attr("style","display: none;"),this.session_tbody.append(n),s.slideDown("fast")},removeTableRow:function(t){t.children("td").slideUp("fast",function(){t.remove()})},isValid:function(){for(var t=r(".course-offering-form input[pattern]:not([disabled])").toArray(),e=r(".course-offering-form .form-group.has-error"),i=r(".course-offering-form span.fa"),n=0===e.length&&0===i.length,s=0;s<t.length;++s){var a=r(t[s]);n=n&&this.isPatternFieldValid(a)}return n},updateCreateBtn:function(){this.createBtn.prop("disabled",!this.isValid())},onFormFieldChanged:function(t){9!==t.keyCode&&16!==t.keyCode&&(r(t.target).closest("div.form-group").addClass("has-warning"),this.updateCreateBtn())},toggleInputValidation:function(t,e){t.parents(".form-group").toggleClass("has-error",!e)},isPatternFieldValid:function(t){return new RegExp(t.attr("pattern")).test(t.val())},validatePatternField:function(t){var e=this.isPatternFieldValid(t);return this.toggleInputValidation(t,e),e},onRegistrationKeyChanged:function(t){this.validatePatternField(r(t.target))},onOfferingEndChanged:function(t){var e=r(t.target),i=e.val();if(this.validatePatternField(e)){var n="infinity"===i||Object(a.b)(i);this.toggleInputValidation(e,n)}},onOfferingShortNameChanged:function(t){var e=this,i=r(t.target),n=i.parent().children("span"),a=i.val(),o="fa fa-spinner fa-spin",l="glyphicon glyphicon-remove text-danger",h="glyphicon glyphicon-ok text-success",d=[o,l,h].join(" ");if(this.call_id=(this.call_id||0)+1,this.hintTimeout&&(clearTimeout(this.hintTimeout),this.hintTimeout=null),this.validatePatternField(i)){if(this.data.offering_short_name===a)return n.removeClass(d),void this.toggleInputValidation(i,!0);n.removeClass(d).addClass(o),this.createBtn.prop("disabled",!0),this.hintTimeout=setTimeout(function(t){r.ajax({type:"GET",url:s.b,data:{course_short_name:e.data.course_short_name,offering_short_name:a},context:e}).always(function(){n.removeClass(d)}).done(function(e){t===this.call_id&&(this.toggleInputValidation(i,e.response.available),n.addClass(e.response.available?h:l),this.updateCreateBtn())}).fail(function(){t===this.call_id&&(this.toggleInputValidation(i,!1),n.addClass(l),this.updateCreateBtn())})},750,this.call_id)}else n.removeClass(d)},onCheckboxClick:function(t){var e=r(t.target),i=e.prop("checked"),n=e.data("toggleid"),s=r("#".concat(n));s.prop("disabled",!i),i?this.validatePatternField(s):this.toggleInputValidation(s,!0)},onRemoveTeacher:function(t){var e=r(t.target);e.prop("disabled",!0);var i=e.closest("tr");if(this.data.is_new)return this.removeTableRow(i),i.closest("div.form-group").addClass("has-warning"),void this.updateCreateBtn();var n={course_short_name:this.data.course_short_name,offering_short_name:this.data.offering_short_name,user_name:i.attr("data-username"),csrf_token:this.data.csrf_token};r.ajax({type:"DELETE",url:s.c,contentType:"application/json",data:JSON.stringify(n),context:this}).done(function(){this.removeTableRow(i)}).fail(function(t){e.prop("disabled",!1),h.error.show_xhr_msg(e,t)})},onAddTeacher:function(t){var e=r(t.target),i=r(".add-teacher-username"),n=i.val(),a=r(".add-teacher-teaching-assistant"),o=a.prop("checked");e.prop("disabled",!0);var l={always:function(){i.focus()},done:function(t){i.val(""),a.prop("checked",!0),this.addTeacherRow({teacher_no:this.teacher_no,username:t.response.username,name:t.response.name,link:"".concat(s.o,"/").concat(t.response.username),teaching_assistant:o,teaching_assistant_checked:o?"checked":""},!0),this.teacher_no+=1,this.data.is_new&&(i.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn())},fail:function(t){e.prop("disabled",!1),h.error.show_xhr_msg(e,t)},scope:this};this.data.is_new?this.getAuthor(n,l):this.postTeacher(n,o,l)},postTeacher:function(t,e,i){var n={course_short_name:this.data.course_short_name,offering_short_name:this.data.offering_short_name,user_name:t,teaching_assistant:e,csrf_token:this.data.csrf_token};r.ajax({type:"POST",url:s.c,contentType:"application/json",data:JSON.stringify(n),context:i.scope||this}).always(i.always).done(i.done).fail(i.fail)},getAuthor:function(t,e){r.ajax({type:"GET",url:s.a,contentType:"application/json",data:{username:t},context:e.scope||this}).always(e.always).done(e.done).fail(e.fail)},onRemoveProblemGroup:function(t){var e=r(t.target);this.removeTableRow(e.closest("tr")),e.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn()},onRemoveSession:function(t){var e=r(t.target);this.removeTableRow(e.closest("tr")),e.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn()},onAddProblemGroup:function(){var t=r("#input_problem_group_name"),e=t.select2("data"),i=e.id,n={name:e.text,problemgroup_no:this.problemgroup_no};this.problemgroup_no+=1,"0"!==i&&(n.id=i,n.link=s.m.replace("{0}",this.data.course_short_name).replace("{1}",this.data.offering_short_name).replace("{2}",i)),this.addProblemgroupRow(n,!0),t.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn(),t.select2("val","")},onAddSession:function(){var t=r("#input_session_name"),e=r("#session_register_all_students"),i={session_name:t.val(),register_students:e.prop("checked"),session_no:this.session_no};this.session_no+=1,this.addSessionRow(i,!0),t.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn(),t.val("")}},n=!1,{init:function(t){n||(n=!0,e.data=t,e.init())}}))}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e,n=i(3),s=i(1),a=t.jQuery,o=a.ns("Kattis");a.extend(a.ns("Kattis.main"),{init:function(){a(".selectify-this").select2(),a('[data-toggle="tooltip"]').tooltip(),a(".site-search > a").on("click",function(){a(this).parent().find("input").focus()}),a(".site-search > input").on("focus",function(){a(this).parent().addClass("active")}),a("body").on("click",function(t){a(".site-search").each(function(){a(this).is(t.target)||0!==a(this).has(t.target).length||a(this).removeClass("active")})}),a("#filter li a").click(function(){var t=a(this).text(),e=a(this).parent().attr("data-value");a("#main_filter_text").text(t),a("#filter_by").val(e),"all"===e?a("#filter_by_value").prop("disabled",!0):a("#filter_by_value").prop("disabled",!1).focus()})}}),t.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},t.escapeHtml=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return t.entityMap[e]})},t.initContestHeader=function(e,i,n,o){var r=t.page_loaded_at;return a(function(a){var l=a(".contest-progress"),h=function(t,e){e&&!l.hasClass(t)?l.addClass(t):!e&&l.hasClass(t)&&l.removeClass(t)},d=-600;i<d&&(d=-(300+5*Math.random()*60));var c=i<d,u=-1;i<0&&(u=30*Math.random());var p=i<u;setInterval(function(){var a=Math.floor(i+(new Date-r)/1e3),f=a<d,m=a<u;document.hidden||(o&&(p&&!m||c&&!f)&&t.location.reload(),c=f,p=m);var g=!1,v=!1,b=!1,_=!1;e?a<0?b=!0:a>=n?v=!0:n-a<=900&&(g=!0):(_=!0,a=0),h("session-nostart",_),h("session-notstarted",b),h("session-nearend",g),h("session-finished",v),a<0&&l.find(".countdown").text(Object(s.a)(-a,!1,!0)),a=Math.max(0,a),a=Math.min(n,a);var y=0;_||(y=100*a/n),l.find(".count_elapsed").text(Object(s.a)(a,!0)),l.find(".count_remaining").text(Object(s.a)(n-a,!0)),l.find(".progress-bar").css("width","".concat(y.toString(),"%"))},1e3)}),function(t,s,a,o){e=t,i=s,n=a,r=o}},a.extend(a.ns("Kattis"),(e={"page-master-layout":o.main,"page-contest-edit":o.views.contest.edit,"page-contest-resolver":o.views.contest.resolver,"page-submit":o.views.submissions.create,"page-problem":{init:n.a},"page-view-candidate":o.views.recruiting.view_candidate,"page-course-offering-edit":o.views.admin.course_offering_edit},{init:function(){document.body.attributes.class.value.split(/\s+/g).forEach(this.run_module,this)},run_module:function(t){var i=document.body.dataset.kattis,n="string"==typeof i?JSON.parse(i):void 0;e[t]&&e[t].init.call(e[t],n)}})),a(o.init.bind(o))}).call(this,i(2))},,function(t,e,i){"use strict";i.r(e);i(13),i(4),i(5),i(6),i(7),i(8),i(9),i(10)},function(t,e,n){(function(t){var e,n=t,s=n.jQuery,a=n.Raphael;!function(){for(var e,i=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],s=n.length,a=t.console=t.console||{};s--;)a[e=n[s]]||(a[e]=i)}(),function(){var e,n,o,r,l=[].slice,h={}.hasOwnProperty,d=function(t,e){for(var i in e)h.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c=function(t,e){return function(){return t.apply(e,arguments)}},u=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=t.Morris={},e=s,n.EventEmitter=function(){function t(){}return t.prototype.on=function(t,e){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e)},t.prototype.fire=function(){var t,e,i,n,s,a,o;if(i=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[i]){for(o=[],n=0,s=(a=this.handlers[i]).length;n<s;n++)e=a[n],o.push(e.apply(null,t));return o}},t}(),n.commas=function(t){var e,i,n,s;return null!=t?(n=t<0?"-":"",e=Math.abs(t),n+=(i=Math.floor(e).toFixed(0)).replace(/(?=(?:\d{3})+$)(?!^)/g,","),(s=e.toString()).length>i.length&&(n+=s.slice(i.length)),n):"-"},n.pad2=function(t){return(t<10?"0":"")+t},n.Grid=function(t){function s(t){var i=this;if("string"==typeof t.element?this.el=e(document.getElementById(t.element)):this.el=e(t.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=e.extend({},this.gridDefaults,this.defaults||{},t),"string"==typeof this.options.units&&(this.options.postUnits=t.units),this.raphael=new a(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var e;return e=i.el.offset(),i.fire("hovermove",t.pageX-e.left,t.pageY-e.top)}),this.el.bind("mouseout",function(t){return i.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var e,n;return n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],e=i.el.offset(),i.fire("hover",n.pageX-e.left,n.pageY-e.top),n}),this.postInit&&this.postInit()}return d(s,t),s.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,hideHover:!1,yLabelFormat:null,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"]},s.prototype.setData=function(t,e){var i,s,a,o,r,l,h,d,c,u,p,f;return null==e&&(e=!0),null==t||0===t.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(u=this.cumulative?0:null,p=this.cumulative?0:null,this.options.goals.length>0&&(r=Math.min.apply(null,this.options.goals),o=Math.max.apply(null,this.options.goals),p=null!=p?Math.min(p,r):r,u=null!=u?Math.max(u,o):o),this.data=function(){var e,i,o;for(o=[],a=e=0,i=t.length;e<i;a=++e)h=t[a],(l={}).label=h[this.options.xkey],this.options.parseTime?(l.x=n.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):l.x=a,d=0,l.y=function(){var t,e,i,n;for(i=this.options.ykeys,n=[],s=t=0,e=i.length;t<e;s=++t)c=i[s],"string"==typeof(f=h[c])&&(f=parseFloat(f)),null!=f&&"number"!=typeof f&&(f=null),null!=f&&(this.cumulative?d+=f:null!=u?(u=Math.max(f,u),p=Math.min(f,p)):u=p=f),this.cumulative&&null!=d&&(u=Math.max(d,u),p=Math.min(d,p)),n.push(f);return n}.call(this),o.push(l);return o}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.parseTime&&this.options.events.length>0&&(this.events=function(){var t,e,s,a;for(a=[],t=0,e=(s=this.options.events).length;t<e;t++)i=s[t],a.push(n.parseDate(i));return a}.call(this),this.xmax=Math.max(this.xmax,Math.max.apply(null,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(null,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",p),this.ymax=this.yboundary("max",u),this.ymin===this.ymax&&(p&&(this.ymin-=1),this.ymax+=1),this.yInterval=(this.ymax-this.ymin)/(this.options.numLines-1),this.yInterval>0&&this.yInterval<1?this.precision=-Math.floor(Math.log(this.yInterval)/Math.log(10)):this.precision=0,this.dirty=!0,e?this.redraw():void 0)},s.prototype.yboundary=function(t,e){var i,n;return"string"==typeof(i=this.options["y"+t])?"auto"===i.slice(0,4)?i.length>5?(n=parseInt(i.slice(5),10),null==e?n:Math[t](e,n)):null!=e?e:0:parseInt(i,10):i},s.prototype._calc=function(){var t,e,i;if(i=this.el.width(),t=this.el.height(),(this.elementWidth!==i||this.elementHeight!==t||this.dirty)&&(this.elementWidth=i,this.elementHeight=t,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,this.options.axes&&(e=Math.max(this.measureText(this.yAxisFormat(this.ymin),this.options.gridTextSize).width,this.measureText(this.yAxisFormat(this.ymax),this.options.gridTextSize).width),this.left+=e,this.bottom-=1.5*this.options.gridTextSize),this.width=this.right-this.left,this.height=this.bottom-this.top,this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc))return this.calc()},s.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy},s.prototype.transX=function(t){return 1===this.data.length?(this.left+this.right)/2:this.left+(t-this.xmin)*this.dx},s.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},s.prototype.drawGoals=function(){var t,e,i,n,s,a;for(a=[],e=i=0,n=(s=this.options.goals).length;i<n;e=++i)t=s[e],a.push(this.drawGoal("M"+this.left+","+this.transY(t)+"H"+(this.left+this.width)));return a},s.prototype.drawEvents=function(){var t,e,i,n,s,a;for(a=[],e=i=0,n=(s=this.events).length;i<n;e=++i)t=s[e],a.push(this.drawEvent("M"+this.transX(t)+","+this.bottom+"V"+this.top));return a},s.prototype.drawGrid=function(){var t,e,i,n,s,a,o,r;if(!1!==this.options.grid||!1!==this.options.axes){for(t=this.ymin,e=this.ymax,r=[],i=a=t,o=this.yInterval;t<=e?a<=e:a>=e;i=a+=o)n=parseFloat(i.toFixed(this.precision)),s=this.transY(n),this.options.axes&&this.drawYAxisLabel(this.left-this.options.padding/2,s,this.yAxisFormat(n)),this.options.grid?r.push(this.drawGridLine("M"+this.left+","+s+"H"+(this.left+this.width))):r.push(void 0);return r}},s.prototype.measureText=function(t,e){var i,n;return null==e&&(e=12),i=(n=this.raphael.text(100,100,t).attr("font-size",e)).getBBox(),n.remove(),i},s.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)},s.prototype.yLabelFormat=function(t){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t):""+this.options.preUnits+n.commas(t)+this.options.postUnits},s.prototype.updateHover=function(t,e){var i,n;if(null!=(i=this.hitTest(t,e)))return(n=this.hover).update.apply(n,i)},s.prototype.drawGoal=function(t){return this.raphael.path(t).attr("stroke",this.options.goalLineColors[i%this.options.goalLineColors.length]).attr("stroke-width",this.options.goalStrokeWidth)},s.prototype.drawEvent=function(t){return this.raphael.path(t).attr("stroke",this.options.eventLineColors[i%this.options.eventLineColors.length]).attr("stroke-width",this.options.eventStrokeWidth)},s.prototype.drawYAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},s.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},s}(n.EventEmitter),n.parseDate=function(t){var e,i,n,s,a,o,r,l,h,d,c;return"number"==typeof t?t:(i=t.match(/^(\d+) Q(\d)$/),s=t.match(/^(\d+)-(\d+)$/),a=t.match(/^(\d+)-(\d+)-(\d+)$/),r=t.match(/^(\d+) W(\d+)$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),h=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),i?new Date(parseInt(i[1],10),3*parseInt(i[2],10)-1,1).getTime():s?new Date(parseInt(s[1],10),parseInt(s[2],10)-1,1).getTime():a?new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10)).getTime():r?(4!==(d=new Date(parseInt(r[1],10),0,1)).getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7),d.getTime()+6048e5*parseInt(r[2],10)):l?l[6]?(o=0,"Z"!==l[6]&&(o=60*parseInt(l[8],10)+parseInt(l[9],10),"+"===l[7]&&(o=0-o)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+o)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime():h?(c=parseFloat(h[6]),e=Math.floor(c),n=Math.round(1e3*(c-e)),h[8]?(o=0,"Z"!==h[8]&&(o=60*parseInt(h[10],10)+parseInt(h[11],10),"+"===h[9]&&(o=0-o)),Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+o,e,n)):new Date(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),e,n).getTime()):new Date(parseInt(t,10),0,1).getTime())},n.Hover=function(){function t(t){null==t&&(t={}),this.options=e.extend({},n.Hover.defaults,t),this.el=e("<div class='"+this.options.class+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return t.defaults={class:"morris-hover morris-default-style"},t.prototype.update=function(t,e,i){return this.html(t),this.show(),this.moveTo(e,i)},t.prototype.html=function(t){return this.el.html(t)},t.prototype.moveTo=function(t,e){var i,n,s,a,o,r;return o=this.options.parent.innerWidth(),a=this.options.parent.innerHeight(),n=this.el.outerWidth(),i=this.el.outerHeight(),s=Math.min(Math.max(0,t-n/2),o-n),null!=e?(r=e-i-10)<0&&(r=e+10)+i>a&&(r=a/2-i/2):r=a/2-i/2,this.el.css({left:s+"px",top:r+"px"})},t.prototype.show=function(){return this.el.show()},t.prototype.hide=function(){return this.el.hide()},t}(),n.Line=function(t){function e(t){if(this.hilight=c(this.hilight,this),this.onHoverOut=c(this.onHoverOut,this),this.onHoverMove=c(this.onHoverMove,this),!(this instanceof n.Line))return new n.Line(t);e.__super__.constructor.call(this,t)}return d(e,t),e.prototype.init=function(){if(this.pointGrow=a.animation({r:this.options.pointSize+3},25,"linear"),this.pointShrink=a.animation({r:this.options.pointSize},25,"linear"),"always"!==this.options.hideHover)return this.hover=new n.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut)},e.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:50,continuousLine:!0,hideHover:!1},e.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},e.prototype.calcPoints=function(){var t,e,i,n,s,a;for(a=[],i=0,n=(s=this.data).length;i<n;i++)(t=s[i])._x=this.transX(t.x),t._y=function(){var i,n,s,a;for(a=[],i=0,n=(s=t.y).length;i<n;i++)null!=(e=s[i])?a.push(this.transY(e)):a.push(e);return a}.call(this),a.push(t._ymax=Math.min.apply(null,[this.bottom].concat(function(){var i,n,s,a;for(a=[],i=0,n=(s=t._y).length;i<n;i++)null!=(e=s[i])&&a.push(e);return a}())));return a},e.prototype.hitTest=function(t,e){var i,n,s,a;if(0===this.data.length)return null;for(i=n=0,s=(a=this.data.slice(1)).length;n<s&&!(t<(a[i]._x+this.data[i]._x)/2);i=++n);return i},e.prototype.onHoverMove=function(t,e){var i;return i=this.hitTest(t,e),this.displayHoverForRow(i)},e.prototype.onHoverOut=function(){if("auto"===this.options.hideHover)return this.displayHoverForRow(null)},e.prototype.displayHoverForRow=function(t){var e;return null!=t?((e=this.hover).update.apply(e,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},e.prototype.hoverContentForRow=function(t){var e,i,n,s,a,o,r;if(n=this.data[t],"function"==typeof this.options.hoverCallback)e=this.options.hoverCallback(t,this.options);else for(e="<div class='morris-hover-row-label'>"+n.label+"</div>",i=a=0,o=(r=n.y).length;a<o;i=++a)s=r[i],e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(s)+"\n</div>";return[e,n._x,n._ymax]},e.prototype.generatePaths=function(){var t,e,i,s,a;return this.paths=function(){var o,r,l,h;for(h=[],i=o=0,r=this.options.ykeys.length;0<=r?o<r:o>r;i=0<=r?++o:--o)a=!0===this.options.smooth||(l=this.options.ykeys[i],u.call(this.options.smooth,l)>=0),e=function(){var t,e,n,a;for(a=[],t=0,e=(n=this.data).length;t<e;t++)void 0!==(s=n[t])._y[i]&&a.push({x:s._x,y:s._y[i]});return a}.call(this),this.options.continuousLine&&(e=function(){var i,n,s;for(s=[],i=0,n=e.length;i<n;i++)null!==(t=e[i]).y&&s.push(t);return s}()),e.length>1?h.push(n.Line.createPath(e,a,this.bottom)):h.push(null);return h}.call(this)},e.prototype.draw=function(){if(this.options.axes&&this.drawXAxis(),this.drawSeries(),!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)},e.prototype.drawXAxis=function(){var t,e,i,s,a,o,r,l,h,d=this;for(o=this.bottom+1.25*this.options.gridTextSize,s=null,t=function(t,e){var i,n;return n=(i=d.drawXAxisLabel(d.transX(e),o,t)).getBBox(),(null==s||s>=n.x+n.width)&&n.x>=0&&n.x+n.width<d.el.width()?s=n.x-d.options.xLabelMargin:i.remove()},(i=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:n.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,e,i,n;for(n=[],t=0,e=(i=this.data).length;t<e;t++)a=i[t],n.push([a.label,a.x]);return n}.call(this)).reverse(),h=[],r=0,l=i.length;r<l;r++)e=i[r],h.push(t(e[0],e[1]));return h},e.prototype.drawSeries=function(){var t,e,i,n,s,a,o,r,l;for(e=s=o=this.options.ykeys.length-1;o<=0?s<=0:s>=0;e=o<=0?++s:--s)null!==(i=this.paths[e])&&this.drawLinePath(i,this.colorFor(n,e,"line"));for(this.seriesPoints=function(){var t,i,n;for(n=[],e=t=0,i=this.options.ykeys.length;0<=i?t<i:t>i;e=0<=i?++t:--t)n.push([]);return n}.call(this),l=[],e=a=r=this.options.ykeys.length-1;r<=0?a<=0:a>=0;e=r<=0?++a:--a)l.push(function(){var i,s,a,o;for(o=[],i=0,s=(a=this.data).length;i<s;i++)n=a[i],t=null!=n._y[e]?this.drawLinePoint(n._x,n._y[e],this.options.pointSize,this.colorFor(n,e,"point"),e):null,o.push(this.seriesPoints[e].push(t));return o}.call(this));return l},e.createPath=function(t,e,i){var s,a,o,r,l,h,d,c,u,p;for(d="",e&&(o=n.Line.gradients(t)),c={y:null},r=u=0,p=t.length;u<p;r=++u)null!=(s=t[r]).y&&(null!=c.y?e?(a=o[r],h=o[r-1],l=(s.x-c.x)/4,d+="C"+(c.x+l)+","+Math.min(i,c.y+l*h)+","+(s.x-l)+","+Math.min(i,s.y-l*a)+","+s.x+","+s.y):d+="L"+s.x+","+s.y:e&&null==o[r]||(d+="M"+s.x+","+s.y)),c=s;return d},e.gradients=function(t){var e,i,n,s,a,o,r,l;for(i=function(t,e){return(t.y-e.y)/(t.x-e.x)},l=[],n=o=0,r=t.length;o<r;n=++o)null!=(e=t[n]).y?(s=t[n+1]||{y:null},null!=(a=t[n-1]||{y:null}).y&&null!=s.y?l.push(i(a,s)):null!=a.y?l.push(i(a,e)):null!=s.y?l.push(i(e,s)):l.push(null)):l.push(null);return l},e.prototype.hilight=function(t){var e,i,n,s,a;if(null!==this.prevHilight&&this.prevHilight!==t)for(e=i=0,s=this.seriesPoints.length-1;0<=s?i<=s:i>=s;e=0<=s?++i:--i)this.seriesPoints[e][this.prevHilight]&&this.seriesPoints[e][this.prevHilight].animate(this.pointShrink);if(null!==t&&this.prevHilight!==t)for(e=n=0,a=this.seriesPoints.length-1;0<=a?n<=a:n>=a;e=0<=a?++n:--n)this.seriesPoints[e][t]&&this.seriesPoints[e][t].animate(this.pointGrow);return this.prevHilight=t},e.prototype.colorFor=function(t,e,i){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,e,i):"point"===i&&this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]},e.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor)},e.prototype.drawLinePath=function(t,e){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.options.lineWidth)},e.prototype.drawLinePoint=function(t,e,i,n,s){return this.raphael.circle(t,e,i).attr("fill",n).attr("stroke-width",this.strokeWidthForSeries(s)).attr("stroke",this.strokeForSeries(s))},e.prototype.strokeWidthForSeries=function(t){return this.options.pointWidths[t%this.options.pointWidths.length]},e.prototype.strokeForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},e}(n.Grid),n.labelSeries=function(t,i,s,a,o){var r,l,h,d,c,u,p,f,m,g,v;if(h=200*(i-t)/s,l=new Date(t),void 0===(p=n.LABEL_SPECS[a]))for(m=0,g=(v=n.AUTO_LABEL_ORDER).length;m<g;m++)if(d=v[m],h>=(u=n.LABEL_SPECS[d]).span){p=u;break}for(void 0===p&&(p=n.LABEL_SPECS.second),o&&(p=e.extend({},p,{fmt:o})),r=p.start(l),c=[];(f=r.getTime())<=i;)f>=t&&c.push([p.fmt(r),f]),p.incr(r);return c},o=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return n.pad2(t.getHours())+":"+n.pad2(t.getMinutes())},incr:function(e){return e.setMinutes(e.getMinutes()+t)}}},r=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return n.pad2(t.getHours())+":"+n.pad2(t.getMinutes())+":"+n.pad2(t.getSeconds())},incr:function(e){return e.setSeconds(e.getSeconds()+t)}}},n.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return t.getFullYear()+"-"+n.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return t.getFullYear()+"-"+n.pad2(t.getMonth()+1)+"-"+n.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:o(60),"30min":o(30),"15min":o(15),"10min":o(10),"5min":o(5),minute:o(1),"30sec":r(30),"15sec":r(15),"10sec":r(10),"5sec":r(5),second:r(1)},n.AUTO_LABEL_ORDER=["decade","year","month","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],n.Area=function(t){function e(t){if(!(this instanceof n.Area))return new n.Area(t);this.cumulative=!0,e.__super__.constructor.call(this,t)}return d(e,t),e.prototype.calcPoints=function(){var t,e,i,n,s,a,o;for(o=[],n=0,s=(a=this.data).length;n<s;n++)(t=a[n])._x=this.transX(t.x),e=0,t._y=function(){var n,s,a,o;for(o=[],n=0,s=(a=t.y).length;n<s;n++)i=a[n],e+=i||0,o.push(this.transY(e));return o}.call(this),o.push(t._ymax=t._y[t._y.length-1]);return o},e.prototype.drawSeries=function(){var t,i,n,s;for(t=n=s=this.options.ykeys.length-1;s<=0?n<=0:n>=0;t=s<=0?++n:--n)null!==(i=this.paths[t])&&(i=i+"L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(i,this.fillForSeries(t)));return e.__super__.drawSeries.call(this)},e.prototype.fillForSeries=function(t){var e;return e=a.rgb2hsl(this.colorFor(this.data[t],t,"line")),a.hsl(e.h,Math.min(255,.75*e.s),Math.min(255,1.25*e.l))},e.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("stroke-width",0)},e}(n.Line),n.Bar=function(t){function i(t){if(this.onHoverOut=c(this.onHoverOut,this),this.onHoverMove=c(this.onHoverMove,this),!(this instanceof n.Bar))return new n.Bar(t);i.__super__.constructor.call(this,e.extend({},t,{parseTime:!1}))}return d(i,t),i.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new n.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut)},i.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],xLabelMargin:50},i.prototype.calc=function(){var t;if(this.calcBars(),!1===this.options.hideHover)return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))},i.prototype.calcBars=function(){var t,e,i,n,s,a,o;for(o=[],t=n=0,s=(a=this.data).length;n<s;t=++n)(e=a[t])._x=this.left+this.width*(t+.5)/this.data.length,o.push(e._y=function(){var t,n,s,a;for(a=[],t=0,n=(s=e.y).length;t<n;t++)null!=(i=s[t])?a.push(this.transY(i)):a.push(null);return a}.call(this));return o},i.prototype.draw=function(){return this.options.axes&&this.drawXAxis(),this.drawSeries()},i.prototype.drawXAxis=function(){var t,e,i,n,s,a,o,r,l;for(a=this.bottom+1.25*this.options.gridTextSize,n=null,l=[],t=o=0,r=this.data.length;0<=r?o<r:o>r;t=0<=r?++o:--o)s=this.data[this.data.length-1-t],i=(e=this.drawXAxisLabel(s._x,a,s.label)).getBBox(),(null==n||n>=i.x+i.width)&&i.x>=0&&i.x+i.width<this.el.width()?l.push(n=i.x-this.options.xLabelMargin):l.push(e.remove());return l},i.prototype.drawSeries=function(){var t,e,i,n,s,a,o,r,l,h,d,c,u,p;return i=this.width/this.options.data.length,r=null!=this.options.stacked?1:this.options.ykeys.length,t=(i*this.options.barSizeRatio-this.options.barGap*(r-1))/r,o=i*(1-this.options.barSizeRatio)/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var r,f,m,g;for(m=this.data,g=[],n=r=0,f=m.length;r<f;n=++r)l=m[n],s=0,g.push(function(){var r,f,m,g;for(m=l._y,g=[],h=r=0,f=m.length;r<f;h=++r)null!==(u=m[h])?(p?(c=Math.min(u,p),e=Math.max(u,p)):(c=u,e=this.bottom),a=this.left+n*i+o,this.options.stacked||(a+=h*(t+this.options.barGap)),d=e-c,this.options.stacked&&(c-=s),this.drawBar(a,c,t,d,this.colorFor(l,h,"bar")),g.push(s+=d)):g.push(null);return g}.call(this));return g}.call(this)},i.prototype.colorFor=function(t,e,i){var n,s;return"function"==typeof this.options.barColors?(n={x:t.x,y:t.y[e],label:t.label},s={index:e,key:this.options.ykeys[e],label:this.options.labels[e]},this.options.barColors.call(this,n,s,i)):this.options.barColors[e%this.options.barColors.length]},i.prototype.hitTest=function(t,e){return 0===this.data.length?null:(t=Math.max(Math.min(t,this.right),this.left),Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length))))},i.prototype.onHoverMove=function(t,e){var i,n;return i=this.hitTest(t,e),(n=this.hover).update.apply(n,this.hoverContentForRow(i))},i.prototype.onHoverOut=function(){if("auto"===this.options.hideHover)return this.hover.hide()},i.prototype.hoverContentForRow=function(t){var e,i,n,s,a,o,r;if("function"==typeof this.options.hoverCallback)e=this.options.hoverCallback(t,this.options);else for(e="<div class='morris-hover-row-label'>"+(n=this.data[t]).label+"</div>",i=a=0,o=(r=n.y).length;a<o;i=++a)s=r[i],e+="<div class='morris-hover-point'> <span class='label-1'><strong class='language' style='background-color: "+this.colorFor(n,i,"label")+"'>\n "+this.options.labels[i]+":\n </strong></span><span> "+this.yLabelFormat(s)+"\n</span></div>";return[e,this.left+(t+.5)*this.width/this.data.length]},i.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor)},i.prototype.drawBar=function(t,e,i,n,s){return this.raphael.rect(t,e,i,n).attr("fill",s).attr("stroke-width",0)},i}(n.Grid),n.Donut=function(){function t(t){if(this.select=c(this.select,this),!(this instanceof n.Donut))return new n.Donut(t);if("string"==typeof t.element?this.el=e(document.getElementById(t.element)):this.el=e(t.element),this.options=e.extend({},this.defaults,t),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==t.data&&0!==t.data.length&&(this.data=t.data,this.redraw())}return t.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",valueColor:"#000000",formatter:n.commas},t.prototype.redraw=function(){var t,e,i,s,o,r,l,h,d,c,u,p,f,m,g,v,b,_,y,x,w,k;for(this.el.empty(),this.raphael=new a(this.el[0]),e=this.el.width()/2,i=this.el.height()/2,p=(Math.min(e,i)-10)/3,u=0,f=0,v=(y=this.data).length;f<v;f++)u+=y[f].value;for(h=5/(2*p),t=1.9999*Math.PI-h*this.data.length,r=0,o=0,this.segments=[],m=0,b=(x=this.data).length;m<b;m++)d=r+h+t*((s=x[m]).value/u),(c=new n.DonutSegment(e,i,2*p,p,r,d,this.options.colors[o%this.options.colors.length],this.options.backgroundColor,s,this.raphael)).render(),this.segments.push(c),c.on("hover",this.select),r=d,o+=1;for(this.text1=this.drawEmptyDonutLabel(e,i-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(e,i+10,this.options.valueColor,14,800),l=Math.max.apply(null,function(){var t,e,i,n;for(n=[],t=0,e=(i=this.data).length;t<e;t++)s=i[t],n.push(s.value);return n}.call(this)),o=0,k=[],g=0,_=(w=this.data).length;g<_;g++){if((s=w[g]).value===l){this.select(o);break}k.push(o+=1)}return k},t.prototype.select=function(t){var e,i,n,s;for(i=0,n=(s=this.segments).length;i<n;i++)s[i].deselect();return(e="number"==typeof t?this.segments[t]:t).select(),this.setLabels(e.data.label,this.options.formatter(e.data.value,e.data))},t.prototype.setLabels=function(t,e){var i,n,s,a,o,r,l,h;return a=1.8*(i=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3),s=i/2,n=i/3,this.text1.attr({text:t,transform:""}),o=this.text1.getBBox(),r=Math.min(a/o.width,s/o.height),this.text1.attr({transform:"S"+r+","+r+","+(o.x+o.width/2)+","+(o.y+o.height)}),this.text2.attr({text:e,transform:""}),l=this.text2.getBBox(),h=Math.min(a/l.width,n/l.height),this.text2.attr({transform:"S"+h+","+h+","+(l.x+l.width/2)+","+l.y})},t.prototype.drawEmptyDonutLabel=function(t,e,i,n,s){var a;return a=this.raphael.text(t,e,"").attr("font-size",n).attr("fill",i),null!=s&&a.attr("font-weight",s),a},t}(),n.DonutSegment=function(t){function e(t,e,i,n,s,a,o,r,l,h){this.cx=t,this.cy=e,this.inner=i,this.outer=n,this.color=o,this.backgroundColor=r,this.data=l,this.raphael=h,this.deselect=c(this.deselect,this),this.select=c(this.select,this),this.sin_p0=Math.sin(s),this.cos_p0=Math.cos(s),this.sin_p1=Math.sin(a),this.cos_p1=Math.cos(a),this.is_long=a-s>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return d(e,t),e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},e.prototype.calcSegment=function(t,e){var i,n,s,a,o,r,l,h,d,c;return i=(d=this.calcArcPoints(t))[0],s=d[1],n=d[2],a=d[3],o=(c=this.calcArcPoints(e))[0],l=c[1],r=c[2],h=c[3],"M"+i+","+s+"A"+t+","+t+",0,"+this.is_long+",0,"+n+","+a+"L"+r+","+h+"A"+e+","+e+",0,"+this.is_long+",1,"+o+","+l+"Z"},e.prototype.calcArc=function(t){var e,i,n,s,a;return e=(a=this.calcArcPoints(t))[0],n=a[1],i=a[2],s=a[3],"M"+e+","+n+"A"+t+","+t+",0,"+this.is_long+",0,"+i+","+s},e.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t)})},e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})},e.prototype.drawDonutSegment=function(t,e,i,n){return this.raphael.path(t).attr({fill:e,stroke:i,"stroke-width":3}).hover(n)},e.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},e.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},e}(n.EventEmitter)}.call(this),e={},t.tmpl=function t(i,n){var s=/\W/.test(i)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[i]=e[i]||t(document.getElementById(i).innerHTML);return n?s(n):s}}).call(this,n(2))}]);