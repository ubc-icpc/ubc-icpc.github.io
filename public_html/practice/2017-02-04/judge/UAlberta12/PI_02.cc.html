<!DOCTYPE html>
<html>
<head>
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>
<style type="text/css">.syntaxhighlighter{overflow-y: hidden !important; overflow-x: auto !important;}</style></head>
<body>
<pre class="brush: cpp">
#include &lt;iostream&gt;

using namespace std;

int numbers[100005];
bool included[100005];

void PrintOut(int start, int edge, int change)
{
	cout &lt;&lt; &quot;[&quot;;
	for (int i = start; i != edge; i += change)
	{
		if (i != start)
				cout &lt;&lt; ',';
		cout &lt;&lt; numbers[i];
	}
	cout &lt;&lt; &quot;]\n&quot;;

}

int main()
{
		int T;
		cin &gt;&gt; T;

		while (T--)
		{
				string ops;
				int N;
				cin &gt;&gt; ops &gt;&gt; N;
				char junk;
				cin &gt;&gt; junk;
				for (int i = 0; i &lt; N; ++i)
						cin &gt;&gt; numbers[i] &gt;&gt; junk;
				if (N == 0)
						cin &gt;&gt; junk;

				// End is exclusive
				int start = 0, end = N;
				bool reversed = false, error = false;
				for (int i = 0; i &lt; ops.size(); ++i) {
					if (ops[i] == 'R') {
							reversed = !reversed;
							continue;
					}


					if (reversed)
							--end;
					else
							++start;

					if (start &gt; end) {
							error = true;
							break;
					}
				}
				if (error) {
					cout &lt;&lt; &quot;error\n&quot;;
					continue;
				}

				if (reversed)
						PrintOut(end - 1, start - 1, -1);
				else
						PrintOut(start, end, 1);

		}

}

</pre>
</body>
<script type="text/javascript">SyntaxHighlighter.all()</script></html>
