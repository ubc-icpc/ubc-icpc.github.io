<!DOCTYPE html>
<html>
<head>
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>
<style type="text/css">.syntaxhighlighter{overflow-y: hidden !important; overflow-x: auto !important;}</style></head>
<body>
<pre class="brush: cpp">
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
using namespace std;

#define MAX 502
typedef long long ll;

int n,m,t,c[MAX];
ll dp[MAX][MAX];

#define sumn(X) ((ll)(X)*(ll)((X)+1)/2)
#define noisy(X,K) ( (((K)+1)-((X)%(K+1)))*(ll)sumn((X)/((K)+1))  + ((X)%(K+1))*(ll)sumn(1+(X)/((K)+1)))
int main(){
	int i,j,k;
//	for (i=0; i&lt;=10; i++) cout&lt;&lt;sumn(i)&lt;&lt;&quot; &quot;; cout&lt;&lt;endl;
//	for (i=0; i&lt;=10; i++){ for (j=0; j&lt;=10; j++) cout&lt;&lt;noisy(i,j)&lt;&lt;&quot; &quot;; cout&lt;&lt;endl; }
	cin&gt;&gt;n&gt;&gt;m&gt;&gt;t; for (i=0; i&lt;n; i++){ cin&gt;&gt;k; c[k]++; }
	for (i=1; i&lt;=m; i++) for (j=0; j&lt;=t; j++){
		dp[i][j]=dp[i-1][j]+noisy(c[i],0);
		for (k=1; k&lt;=j; k++) dp[i][j]=min(dp[i][j],dp[i-1][j-k]+noisy(c[i],k));
	}
	cout&lt;&lt;dp[m][t]&lt;&lt;endl;
	return 0;
}</pre>
</body>
<script type="text/javascript">SyntaxHighlighter.all()</script></html>
