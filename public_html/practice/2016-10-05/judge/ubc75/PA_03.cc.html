<!DOCTYPE html>
<html>
<head>
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>
<style type="text/css">.syntaxhighlighter{overflow-y: hidden !important; overflow-x: auto !important;}</style></head>
<body>
<pre class="brush: cpp">

using namespace std;
#include &lt;bits/stdc++.h&gt;
#define rep(i,n) for(auto i=0; i&lt;(n); i++)
#define mem(x,val) memset((x),(val),sizeof(x));
#define write(x) freopen(x,&quot;w&quot;,stdout);
#define read(x) freopen(x,&quot;r&quot;,stdin);
#define all(x) x.begin(),x.end()
#define sz(x) ((int)x.size())
#define sqr(x) ((x)*(x))
#define pb push_back
#define clr clear()
#define inf (1&lt;&lt;30)
#define ins insert
#define xx first
#define yy second
#define eps 1e-9
typedef long long ll;
typedef unsigned long long ull;
typedef string st;
typedef vector&lt;int&gt; vi;
typedef vector&lt;ll&gt; vll;
typedef vector&lt;st&gt; vs;
typedef map&lt;int,int&gt; mii;
typedef map&lt;st,int&gt; msi;
typedef set&lt;int&gt; si;
typedef set&lt;st&gt; ss;
typedef pair&lt;int,int&gt; pii;
typedef vector&lt;pii&gt; vpii;
#define mx 0

map&lt;string, vector&lt;string&gt;&gt; graph;
set&lt;string&gt; nodes;
map&lt;string, string&gt; status;
bool possible = true;

void topsort(string node){

 	status[node] = &quot;grey&quot;;

 	rep(i,graph[node].size()){
 		if(status[graph[node][i]]==&quot;white&quot;)
 			topsort(graph[node][i]);
 		else if(status[graph[node][i]]==&quot;grey&quot;){
 			possible = false;
 			return;
 		}

 	}

 	status[node] = &quot;black&quot;;

}



int main() {
    ios_base::sync_with_stdio(0);
    
	int n; cin &gt;&gt;n;		
	string line, p1,p2,op;
	getline(cin, line);
	rep(i,n){
		getline(cin, line);
		stringstream ss(line);
		ss &gt;&gt; p1 &gt;&gt; op &gt;&gt; p2;

		nodes.insert(p1);
		nodes.insert(p2);

		if(op == &quot;&lt;&quot;)
			graph[p1].push_back(p2);
		else
			graph[p2].push_back(p1);

	}

	set&lt;string&gt;::iterator it;
	for(it=nodes.begin(); it!=nodes.end(); it++){
		//cout &lt;&lt; *it &lt;&lt; endl;
		status[*it]=&quot;white&quot;; //initialize all nodes to unvisited
	}

	
	for(it=nodes.begin(); it!=nodes.end(); it++){
		
		topsort(*it);
		if(!possible){ 
			break;
		}
	}

	if(!possible)
		cout &lt;&lt; &quot;impossible&quot;  &lt;&lt; endl;
	else
		cout &lt;&lt; &quot;possible&quot; &lt;&lt; endl;



	return 0;

}
</pre>
</body>
<script type="text/javascript">SyntaxHighlighter.all()</script></html>
